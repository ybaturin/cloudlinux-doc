(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{445:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"additional-packages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#additional-packages","aria-hidden":"true"}},[t._v("#")]),t._v(" Additional Packages")]),t._v(" "),s("p",[t._v("CloudLinux will package additional software needed by hosters for your convenience.")]),t._v(" "),s("p",[s("router-link",{attrs:{to:"/deprecated/#git-for-cpanel"}},[t._v("Git for cPanel")]),t._v(" (deprecated)")],1),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[s("router-link",{attrs:{to:"/additional_packages/#alt-suexec"}},[t._v("alt-suexec")])],1)]),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[s("router-link",{attrs:{to:"/additional_packages/#tuned-profiles-cloudlinux"}},[t._v("tuned-profiles-cloudlinux")])],1)]),t._v(" "),s("p",[s("router-link",{attrs:{to:"/cloudlinux-fchange/"}},[t._v("cloudlinux-fchange")])],1),t._v(" "),s("div",{staticClass:"notranslate"},[s("h2",{attrs:{id:"alt-suexec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alt-suexec","aria-hidden":"true"}},[t._v("#")]),t._v(" alt-suexec")])]),t._v(" "),s("p",[s("strong",[t._v("What is "),s("span",{staticClass:"notranslate"},[t._v("alt-suexec")]),t._v(" package needed for?")])]),t._v(" "),s("p",[t._v("If you use standard httpd from our repository, but your users' sites do not match standard Apache location of "),s("span",{staticClass:"notranslate"},[s("code",[t._v("/var/www")])]),t._v(", then you should use alt-suexec.\nalt-suexec package brings suEXEC binaries pre-compiled for specific locations, like "),s("span",{staticClass:"notranslate"},[t._v(" /home ")]),t._v(" .")]),t._v(" "),s("p",[s("strong",[t._v("How to switch suEXEC with alt-suexec")])]),t._v(" "),s("p",[t._v("Based on httpd 2.2 basic for 6 and httpd 2.4 basic for CloudLinux 7, the package brings to server a set of suEXECs with different "),s("span",{staticClass:"notranslate"},[t._v(" DOCUMENT ROOT ")]),t._v(" s and "),s("span",{staticClass:"notranslate"},[t._v(" MIN_UID/MIN_GID ")]),t._v(" parameters. The first set of suEXECs is listed by such modes:")]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# switch_suexec -h\nUSE_BIZ - DOCUMENT ROOT /biz/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_HOSTING - DOCUMENT ROOT /hosting/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_HSPHERE - DOCUMENT ROOT /hsphere/local MIN_UID 100 MIN_GID 100 CALLER httpd\nUSE_HOME - DOCUMENT ROOT /home/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_WWW - DOCUMENT ROOT /var/www/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_FSROOT - DOCUMENT ROOT / MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_STORAGE - DOCUMENT ROOT /storage/content/ MIN_UID 500 MIN_GID 100 CALLER apache\nUSE_DATAS - DOCUMENT ROOT /datas/ MIN_UID 500 MIN_GID 100 CALLER apache\n")])])])]),t._v("\nThe package also brings its own utility for installing specific suEXEC:\n"),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("-l")]),t._v(" "),s("td",[t._v("list of available suexec")])]),t._v(" "),s("tr",[s("td",[t._v("-u")]),t._v(" "),s("td",[t._v("update suexec according to "),s("span",{staticClass:"notranslate"},[t._v(" /etc/sysconfig/alt-suexec ")])])]),t._v(" "),s("tr",[s("td",[t._v("-s")]),t._v(" "),s("td",[t._v("set new suexec and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-p")]),t._v(" "),s("td",[t._v("set new suexec path and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-o")]),t._v(" "),s("td",[t._v("set new suexec owners and install it")])]),t._v(" "),s("tr",[s("td",[t._v("-r")]),t._v(" "),s("td",[t._v("restore native apache suexec")])])])]),t._v(" "),s("p",[t._v("There are two ways to set up new suEXEC binary:")]),t._v(" "),s("ol",[s("li",[t._v("via config file "),s("span",{staticClass:"notranslate"},[s("em",[t._v("/etc/sysconfig/alt-suexec")])])]),t._v(" "),s("li",[t._v("via utility "),s("em",[t._v("switch_suexec")])])]),t._v(" "),s("p",[t._v("Here are the examples of how to set up suEXEC with "),s("span",{staticClass:"notranslate"},[t._v(' DOC_ROOT = "/home": ')])]),t._v(" "),s("p",[s("strong",[t._v("1.")])]),t._v(" "),s("ol",[s("li",[t._v("add string "),s("span",{staticClass:"notranslate"},[t._v(' "USE_HOME" ')]),t._v(" to "),s("span",{staticClass:"notranslate"},[s("em",[t._v("/etc/sysconfig/alt-suexec")])])]),t._v(" "),s("li",[t._v("run the command "),s("span",{staticClass:"notranslate"},[t._v(" switch_suexec -u ")])])]),t._v(" "),s("p",[s("strong",[t._v("2.")])]),t._v(" "),s("ol",[s("li",[s("span",{staticClass:"notranslate"},[t._v(" switch_suexec -sUSE_HOME ")])])]),t._v(" "),s("p",[t._v("Result of both methods:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# cat /etc/sysconfig/alt-suexec\nUSE_HOME\n")])])])]),t._v(" "),s("p",[t._v("Here is standard suEXEC for CloudLinux 6 clean server:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('# /usr/sbin/suexec -V\n-D AP_DOC_ROOT="/var/www"\n-D AP_GID_MIN=100\n-D AP_HTTPD_USER="apache"\n-D AP_LOG_EXEC="/var/log/httpd/suexec.log"\n-D AP_SAFE_PATH="/usr/local/bin:/usr/bin:/bin"\n-D AP_UID_MIN=500\n-D AP_USERDIR_SUFFIX="public_html"\n-D AP_SAFE_DIRECTORY="/usr/local/safe-bin"\n')])])])]),t._v(" "),s("p",[t._v("Here is output of new suEXEC after "),s("span",{staticClass:"notranslate"},[t._v(" USE_HOME ")]),t._v(" installtion:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('# /usr/sbin/suexec -V\n-D AP_DOC_ROOT="/home/"\n-D AP_GID_MIN=100\n-D AP_HTTPD_USER="apache"\n-D AP_LOG_EXEC="/var/log/httpd/suexec.log"\n-D AP_SAFE_PATH="/usr/local/bin:/usr/bin:/bin"\n-D AP_UID_MIN=500\n-D AP_USERDIR_SUFFIX="public_html"\n-D AP_SAFE_DIRECTORY="/usr/local/safe-bin"\n')])])])]),t._v(" "),s("p",[t._v("Description of other switch_suexec parameters:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("-p")]),t._v(" "),s("td",[t._v("if suexec binary file will be placed not in standard way "),s("span",{staticClass:"notranslate"},[t._v(" /usr/sbin ")]),t._v(" - specify this new path with p-option")])]),t._v(" "),s("tr",[s("td",[t._v("-o")]),t._v(" "),s("td",[t._v("if suexec binary file not owned by "),s("span",{staticClass:"notranslate"},[t._v(" root:apache ")]),t._v(" - specify new owner with o-option")])])])]),t._v(" "),s("p",[t._v("For most cases -p and -o options for standard Apache are useless.")]),t._v(" "),s("p",[t._v("Correct suEXEC will be restored even after httpd update or reinstall.")]),t._v(" "),s("p",[t._v("List of pre-built suEXEC binary files stored without suid bit and not executable.")]),t._v(" "),s("p",[s("strong",[t._v("How to install alt-suexec?")])]),t._v(" "),s("p",[t._v("For installation run the command:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("yum install alt-suexec\n")])])])]),t._v(" "),s("p",[s("strong",[t._v("New suexec with custom parameters")])]),t._v(" "),s("p",[t._v("If you need suEXEC with custom parameters absent in current set of alt-suexec, please submit a ticket on "),s("a",{attrs:{href:"https://cloudlinux.zendesk.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloudlinux.zendesk.com"),s("OutboundLink")],1),t._v(" and we will add new suEXEC with needed parameters.")]),t._v(" "),s("h2",{attrs:{id:"tuned-profiles-cloudlinux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuned-profiles-cloudlinux","aria-hidden":"true"}},[t._v("#")]),t._v(" tuned-profiles-cloudlinux")]),t._v(" "),s("p",[t._v("The "),s("span",{staticClass:"notranslate"},[s("strong",[s("em",[t._v("tuned-profiles-cloudlinux")])])]),t._v(" package brings a range of kernel under-the-hood tunings to address high LA, iowait issues what were detected earlier on particular users deploys. The package also encloses OOM adjustments to prioritize the elimination of overrun PHP, "),s("span",{staticClass:"notranslate"},[t._v(" lsphp, Phusion Passenger ")]),t._v(" workers processes over other processes (e.g. ssh, a cron job).")]),t._v(" "),s("p",[t._v("There are three profiles provided by CloudLinux:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# tuned-adm list | grep cloudlinux\n- cloudlinux-default          - Default CloudLinux tuned profile\n- cloudlinux-dummy            - Empty CloudLinux tuned profile\n- cloudlinux-vz               - Empty CloudLinux tuned profile\n")])])])]),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[t._v(" cloudlinux-dummy")]),t._v(" and  "),s("span",{staticClass:"notranslate"},[t._v(" cloudlinux-vz")]),t._v(" are used for internal needs or when  "),s("span",{staticClass:"notranslate"},[t._v(" Virtuozzo/OpenVZ ")]),t._v("  detected and actually do nothing.")]),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[t._v(" cloudlinux-default ")]),t._v(" is one to be used, it actually does the following:")]),t._v(" "),s("ol",[s("li",[t._v("Switches CPU power consumption mode to the maximum. CPU operates at maximum performance at the maximum clock rate:")])]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("governor=performance\nenergy_perf_bias=performance\n")])])])]),t._v(" "),s("p",[t._v("::: tip Note\nIf standard software CPU governors are used.\n:::")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Applies the following kernel options:"),s("br"),t._v(" "),s("span",{staticClass:"notranslate"},[t._v("\nvm.force_scan_thresh=100 ")]),t._v(" - Improves kernel memory clean-up in case of big number of running LVE.")])]),t._v(" "),s("p",[t._v("UBC parameters set the limits for the containers:")]),t._v(" "),s("p",[s("span",{staticClass:"notranslate"},[t._v("  ubc.dirty_ratio=100 ")]),t._v(" - Defines maximum RAM percentage for dirty memory pages.\n"),s("span",{staticClass:"notranslate"},[t._v(" dirty_background_ratio=75")]),t._v(" - Defines RAM percentage when to allow writing dirty pages on the disk.")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("em",[t._v("[CloudLinux 7 only]")]),t._v(" Detects used disk types and changes elevator to "),s("span",{staticClass:"notranslate"},[t._v(" 'deadline' ")]),t._v(" for HDD and to "),s("span",{staticClass:"notranslate"},[t._v(" 'noop' ")]),t._v(" for SSD in "),s("span",{staticClass:"notranslate"},[t._v(" /sys/block/[blockname]/queue/scheduler ")]),t._v(" .")])]),t._v(" "),s("p",[t._v("::: tip Note\n"),s("span",{staticClass:"notranslate"},[t._v("The script uses /sys/block/[blockname]/queue/rotational flag, some RAID controllers can not set it properly. For example, SSD used for RAID but rotational is set to 1 by RAID driver. As a workaround add the following to /etc/rc.d/rc.local to make it applied on boot:")]),t._v("\n:::")]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('echo "noop" > /sys/block/[blockname]/queue/scheduler  \necho "0" > /sys/block/[blockname]/queue/rotational\n')])])])]),t._v(" "),s("p",[t._v("Where "),s("span",{staticClass:"notranslate"},[s("em",[t._v("[blockname]")])]),t._v(" is used device name, like "),s("span",{staticClass:"notranslate"},[s("em",[t._v("sda/sdb")])]),t._v(" .")]),t._v(" "),s("p",[t._v("And make it executable:\n")]),s("div",{staticClass:"notranslate"},[s("p"),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("chmod +x /etc/rc.d/rc.local\n")])])])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[s("em",[t._v("[CloudLinux 7 only]")]),t._v(" The profile sets "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" scheduler. For the normal discs the "),s("span",{staticClass:"notranslate"},[t._v(" Deadline Scheduler ")]),t._v(" is set to improve "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" performance and decrease "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" latency, for SSD - noop.\nWhen configuring scheduler "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" queue is changed and set to the value 1024 which improves overall "),s("span",{staticClass:"notranslate"},[t._v(" I/O ")]),t._v(" subsystem performance by caching "),s("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" requests in memory.")])]),t._v(" "),s("li",[s("p",[t._v("Disables transparent "),s("span",{staticClass:"notranslate"},[t._v(" HugePage ")]),t._v(" .")])]),t._v(" "),s("li",[s("p",[t._v("Provides adjustment group file for OOM-Killer to kill overrun php, lsphp and "),s("span",{staticClass:"notranslate"},[t._v(" Phusion Passenger ")]),t._v(" workers first.")])])]),t._v(" "),s("p",[t._v("To install:")]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("yum install tuned-profiles-cloudlinux\n")])])])]),t._v(" "),s("p",[t._v("To start using a profile:")]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("tuned-adm profile cloudlinux-default\n")])])])]),t._v(" "),s("p",[t._v("To stop using a profile:")]),t._v(" "),s("div",{staticClass:"notranslate"},[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("tuned-adm off\n")])])])])])},[],!1,null,null,null);a.default=n.exports}}]);