(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{463:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"lve-stats-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lve-stats-2","aria-hidden":"true"}},[t._v("#")]),t._v(" LVE-Stats 2")]),t._v(" "),a("h3",{attrs:{id:"why-is-it-needed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-is-it-needed","aria-hidden":"true"}},[t._v("#")]),t._v(" Why is it needed?")]),t._v(" "),a("ul",[a("li",[t._v("Old LVE-statistics store averages as integer numbers, as % of "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" usage. If user used 100% of "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" for 1 second within an hour, it is only 1-2% for a minute, and 0 for 5 minutes. Data in old LVE-statistics is aggregated to 1-hour intervals. So, such peak load will not be recorded and we need to store data with much higher precision.")]),t._v(" "),a("li",[t._v("100% "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" usage in old lve statistics means “all cores”. On 32 core servers usage is not visible for most users (as they are limited to 1 core).")]),t._v(" "),a("li",[t._v("Old LVE-statistics does not provide a way to determine a cause of LVE faults, i.e. what processes are running when user hits LVE limits.")]),t._v(" "),a("li",[t._v("Notifications in old LVE-statistics are not accurate because they are based on average values for "),a("span",{staticClass:"notranslate"},[t._v("CPU, IO, IOPS.")])]),t._v(" "),a("li",[t._v("Old LVE-statistics functionality is hard to extend.")])]),t._v(" "),a("h3",{attrs:{id:"major-improvements-and-features"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#major-improvements-and-features","aria-hidden":"true"}},[t._v("#")]),t._v(" Major improvements and features")]),t._v(" "),a("ul",[a("li",[t._v("increased precision of statistics;")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" usage is calculated  in terms of % of a single core (100% usage means one core);")]),t._v(" "),a("li",[t._v("lvestats-server emulates and tracks faults for "),a("span",{staticClass:"notranslate"},[t._v("CPU, IO, IOPS")]),t._v(";")]),t._v(" "),a("li",[t._v("lvestats-server saves “snapshots” of user’s processes and queries for each “incident” - added new lve-read-snapshot utility;")]),t._v(" "),a("li",[t._v("improved notifications about hitting LVE limits (more informative and without false positives);")]),t._v(" "),a("li",[t._v("implemented ability to add custom plugins;")]),t._v(" "),a("li",[t._v("MySQL and "),a("span",{staticClass:"notranslate"},[t._v("PostGreSQL")]),t._v(" support;")]),t._v(" "),a("li",[t._v("more pretty, scalable, interactive charts;")]),t._v(" "),a("li",[t._v("snapshots include HTTP-requests.")])]),t._v(" "),a("h3",{attrs:{id:"what-features-will-be-implemented-in-the-future"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-features-will-be-implemented-in-the-future","aria-hidden":"true"}},[t._v("#")]),t._v(" What features will be implemented in the future?")]),t._v(" "),a("ul",[a("li",[t._v("Notifications for control panels other than CPanel.")]),t._v(" "),a("li",[t._v("Burstable Limits/server health: We are monitoring server health ( "),a("span",{staticClass:"notranslate"},[t._v(" LA ")]),t._v(" , "),a("span",{staticClass:"notranslate"},[t._v(" memory ")]),t._v(" , idle "),a("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" ) and automatically decreasing/increasing limits based on server health.")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v("Reseller Limits")]),t._v(": plugin would analyze usage per group of users (reseller’s usage), and do actions.")]),t._v(" "),a("li",[t._v("Suspend/notify plugin: would detect that user is being throttled for 10 minutes, and suspend him (just because), or notify, or increase limits.")])]),t._v(" "),a("h2",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),a("p",[t._v("To install, please execute:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install lve-stats\n")])])])]),t._v(" "),a("p",[t._v("To update:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum update lve-stats\n")])])])]),t._v(" "),a("p",[t._v("Settings of old "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(" (ver. 0.x) are imported automatically on the first install/update of a new "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(" package.")]),t._v(" "),a("p",[t._v("SQLite database file is located in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/var/lve/lvestats2.db")])]),t._v(", data from old "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(" (ver. 0.x) are being migrated automatically in the background. Migrating process can last 2-8 hours (during this time lags are possible when admin is trying to check statistics, at the same time users will not be affected). Migrating the latest 30 days, "),a("span",{staticClass:"notranslate"},[t._v("SQLite DB")]),t._v(" stable migration is provided.")]),t._v(" "),a("p",[t._v("Currently, the new "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(" supports all databases available in CloudLinux (except "),a("span",{staticClass:"notranslate"},[t._v("PosgreSQL")]),t._v(" for CL5).")]),t._v(" "),a("h3",{attrs:{id:"downgrade"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#downgrade","aria-hidden":"true"}},[t._v("#")]),t._v(" Downgrade")]),t._v(" "),a("p",[t._v("If you have any problems after update, downgrade "),a("span",{staticClass:"notranslate"},[t._v("lve-stats2")]),t._v(" to the previous stable version by running:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum downgrade lve-stats\n")])])])]),t._v(" "),a("p",[t._v("and contact CloudLinux support at "),a("a",{attrs:{href:"https://cloudlinux.zendesk.com/hc/en-us/requests/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloudlinux.zendesk.com/hc/requests/new"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v(":::tip Note\nYou may need to rename "),a("code",[t._v("*.rpmsave")]),t._v(" files to original ones in order to restore settings for old "),a("span",{staticClass:"notranslate"},[t._v("lve-stats ("),a("code",[t._v("/etc/sysconfig/lvestats")]),t._v(", "),a("code",[t._v("/etc/sysconfig/cloudlinux-notify")])]),t._v(").\n:::")]),t._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),a("p",[t._v("Main configuration file "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(" contains the following options:")]),t._v(" "),a("ul",[a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("db_type")])]),t._v(" - selects appropriate database type to use;")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("connect-string")])]),t._v(" - connection string for "),a("span",{staticClass:"notranslate"},[t._v("PostGreSQL")]),t._v(" and MySQL database, has the following form:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("connect_string = USER:PASSWORD@HOST[:PORT]/DATABASE\n")])])])]),t._v(" "),a("p",[t._v("Default port is used for specific database, if port is not specified (typical port is 3306 for MySQL and 5432 for "),a("span",{staticClass:"notranslate"},[t._v("PostGreSQL")]),t._v("). Connection string is not used for sqlite database.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("server_id")])]),t._v(" - sets the name of the server (at most 10 characters). This option is to use with centralized database ( "),a("span",{staticClass:"notranslate"},[t._v("PostGreSQL")]),t._v(' or MySQL). For use with sqlite database, value of this option should be "localhost" (without quotes).')])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("plugins")])]),t._v(" – path to directory containing custom plugins for "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(" (default path "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve-stats/plugins")])]),t._v(").")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("db_timeout")])]),t._v(" - period of time to write data to database (in seconds); default value is 60 seconds.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("timeout")])]),t._v(" - timeout for custom plugins (seconds). If plugin execution does not finish within this period, plugin is terminated. Default value is 5 seconds.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("interval")])]),t._v(" - duration of one cycle of "),a("span",{staticClass:"notranslate"},[t._v("lvestats-server")]),t._v(" (seconds). This should be less than total duration of execution of all plugins. Default value is 5 seconds. Increasing this parameter makes precision of statistics worse.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("keep_history_days")])]),t._v(" - period of time (in days) to keep history in database. Old data is removed from database automatically. Default value is 60 days.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mode")])]),t._v(" – sets compatibility output mode (compatibility with older lveinfo version")]),t._v(" "),a("ul",[a("li",[t._v("Value "),a("code",[t._v("v1")]),t._v(" enables compatibility with old version of "),a("span",{staticClass:"notranslate"},[t._v("lveinfo")]),t._v(".")]),t._v(" "),a("li",[t._v("Value "),a("code",[t._v("v2")]),t._v(" enables "),a("span",{staticClass:"notranslate"},[a("code",[t._v("extended")])]),t._v(" output mode, but can break LVE plugins for control panels (statistics in "),a("span",{staticClass:"notranslate"},[t._v("LVE Manager")]),t._v(", "),a("span",{staticClass:"notranslate"},[t._v("Resource Usage")]),t._v(", etc). Support of "),a("code",[t._v("v2")]),t._v(" mode will be added to LVE plugins in the recent future. When mode parameter is absent, later version of "),a("span",{staticClass:"notranslate"},[t._v("lveinfo")]),t._v(" is implied.")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("disable_snapshots")])]),t._v(" - disable snapshots and incidents.\nPossible values:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("true")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("false")])])])])])]),t._v(" "),a("p",[t._v("Configuration files for plugins are located in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats.config")])]),t._v(" directory.")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats.config/SnapshotSaver.cfg")])]),t._v(" contains the following options:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("period_between_incidents")])]),t._v(' - the minimal interval of time between incidents (in seconds). If minimal interval of time between LVE faults is greater than value specified, than new "incident" will begin and new snapshots will be saved. Default value is 300 seconds.')]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("snapshots_per_minute")])]),t._v(" - the maximum number of snapshots saved per minute for specific LVE id (default is "),a("code",[t._v("2")]),t._v(").")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("max_snapshots_per_incident")])]),t._v(' - the maximum number of snapshots saved for one "incident". Default is '),a("code",[t._v("10")]),t._v(".")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats.config/StatsNotifier.cfg")])]),t._v(" contains the following options:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_ADMIN")])]),t._v(" – enables notification for admin ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_RESELLER")])]),t._v(" – enables notification for reseller ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_CUSTOMER")])]),t._v(" - enables notification for customers ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_INCLUDE_RESELLER_CUSTOMER")])]),t._v(" – "),a("code",[t._v("Y")]),t._v("=notify all users, "),a("code",[t._v("N")]),t._v("=notify only hoster's users (whos reseller is root), default = "),a("code",[t._v("N")]),t._v(";")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_CPU")])]),t._v(" – notify about "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" faults when customer hits 100% of his "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" limit ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_IO")])]),t._v(" - notify about "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" faults when customer hits 100% of his "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" limit ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_IOPS")])]),t._v(" - notify about "),a("span",{staticClass:"notranslate"},[t._v("IOPS")]),t._v(" faults when customer hits 100% of his "),a("span",{staticClass:"notranslate"},[t._v("IOPS")]),t._v(" limit ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_MEMORY")])]),t._v(" - notify about memory faults ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_EP")])]),t._v(" – notify about entry processes faults ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_NPROC")])]),t._v(" – notify about number of processes faults ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("Y/N")])]),t._v(", default "),a("code",[t._v("N")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_MIN_FAULTS_ADMIN")])]),t._v(" – minimum number of faults to notify admin (default "),a("code",[t._v("1")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_MIN_FAULTS_USER")])]),t._v(" – minimum number of faults to notify customer (default "),a("code",[t._v("1")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_INTERVAL_ADMIN")])]),t._v(" – period of time to notify admin (default "),a("code",[t._v("12h")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_INTERVAL_USER")])]),t._v(" – period of time to notify customer (default "),a("code",[t._v("12h")]),t._v(");")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_EMAIL")])]),t._v(" - sender email address. For example: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_EMAIL=main_admin@host.com")]),t._v(";")])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_SUBJECT")])]),t._v(" - email message subject. For example: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_SUBJECT=Message from notifier")])])])]),t._v(" "),a("p",[t._v("These values can also be set using "),a("router-link",{attrs:{to:"/command-line_tools/#cloudlinux-config"}},[t._v("cloudlinux-config CLI")]),t._v(" utility")],1),t._v(" "),a("p",[t._v("Templates of notifications are located here:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US/admin_notify.txt")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US/reseller_notify.txt")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US/user_notify.txt")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US/admin_notify.html")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US/reseller_notify.html")])])])]),t._v(" "),a("p",[t._v(":::tip Note\nNotifications about LVE faults are implemented for CPanel only.\n:::")]),t._v(" "),a("p",[t._v("After changing any options above, please restart "),a("span",{staticClass:"notranslate"},[t._v("lvestats")]),t._v(" service:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart\n")])])])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/logrotate.d/lvestats")])]),t._v(" - configuration file for "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/var/log/lve-stats.log rotation")])])]),t._v(" "),a("h3",{attrs:{id:"lve-stats2-and-mysql-db-server-compatible-work-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lve-stats2-and-mysql-db-server-compatible-work-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" LVE Stats2 and MySQL DB Server Compatible Work Setup")]),t._v(" "),a("p",[t._v(":::tip Note\nRun all the commands below under root.\n:::")]),t._v(" "),a("p",[a("strong",[t._v("1. MySQL Server Setup")])]),t._v(" "),a("p",[t._v("If MySQL Server is not installed, then install it according to control panel documentation.")]),t._v(" "),a("p",[t._v("For non-panel system:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("CloudLinux 6")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install mysql mysql-server\nservice mysqld start\nchkconfig mysqld on\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("CloudLinux 7")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install mariadb mariadb-server\nsystemctl start mariadb.service\nsystemctl enable mariadb.service\n")])])])])])]),t._v(" "),a("p",[a("strong",[t._v("2. Database Setup")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Run MySQL administrative utility: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql")])]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In utility run the commands:")]),t._v(" "),a("ul",[a("li",[t._v("creating server DB. Also, check "),a("strong",[a("em",[t._v("Note")])]),t._v(" below.")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE DATABASE db_lvestats2;\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("creating a user for "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" server to work under. Also, check "),a("strong",[a("em",[t._v("Note")])]),t._v(" below.")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE USER 'lvestats2'@'localhost' IDENTIFIED BY 'lvestats2_passwd';\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("granting all the privileges for all DB tables to the user. Use the username and DB name from the points above.")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GRANT ALL PRIVILEGES ON db_lvestats2.* TO 'lvestats2'@'localhost';\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("refreshing privileges information.")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("FLUSH PRIVILEGES;\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("Exit administrative utility "),a("span",{staticClass:"notranslate"},[a("code",[t._v("(Ctrl+d)")])]),t._v(".")])])])]),t._v(" "),a("p",[t._v(":::tip Note\nDB name, username and their passwords above are given for an example - you can use any of your choices. Using old DB from "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats")]),t._v(" version 1 is also acceptable as "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats2")]),t._v(" uses different tables and the old information will not be corrupted.\n:::")]),t._v(" "),a("p",[a("strong",[t._v("3.")]),t._v(" "),a("span",{staticClass:"notranslate"},[a("strong",[t._v("LVE Stats 2")])]),t._v(" "),a("strong",[t._v("Setup")])]),t._v(" "),a("ul",[a("li",[t._v("Stop "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" server by running the command:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats stop\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("In server configuration file "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(", edit the following options:\n"),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("db_type = mysql")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string = lvestats2:lvestats2_passwd@localhost/db_lvestats2")])])])])])]),t._v(" "),a("p",[t._v(":::tip Note\n"),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(" option value is used in format: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("user:pass@host/database")])]),t._v(".\nUsername, password and DB name must be the same as in point 2 of Database Setup above.\n:::")]),t._v(" "),a("ul",[a("li",[t._v("After making changes in configuration files run:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/usr/sbin/lve-create-db \n")])])])]),t._v(" "),a("p",[t._v("For DB primary initialization (creating tables, indexes, etc). There is no need to create anything in the DB manually.")]),t._v(" "),a("ul",[a("li",[t._v("When done, restart server by running:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("4. Additional Security Settings")])]),t._v(" "),a("p",[t._v("If you need to provide access to "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats")]),t._v(" information utilities ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("lveinfo")]),t._v(", "),a("code",[t._v("lvechart")]),t._v(", "),a("code",[t._v("lve-read-snapshot")])]),t._v(") for different users, then we recommend creating one more DB user with read-only privilege to guarantee information security. It can be done by running the following commands in administrative utility:")]),t._v(" "),a("ul",[a("li",[t._v("creating a user (check "),a("strong",[a("em",[t._v("Note")])]),t._v(" above)")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE USER 'lvestats2_read'@'localhost' IDENTIFIED BY 'lvestats2_read_passwd';\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("granting read-only privilege to the user")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GRANT SELECT ON db_lvestats2.* TO 'lvestats2_read'@'localhost';\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("refreshing privileges information")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("FLUSH PRIVILEGES;\n")])])])]),t._v(" "),a("p",[t._v("If "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats2")]),t._v(" server is set correctly (see information below), the information utilities will work under this user.")]),t._v(" "),a("p",[t._v("If you need to provide access to information utilities to other users, then in order to guarantee information security you should do the following:")]),t._v(" "),a("ul",[a("li",[t._v("Assign permission 600 to the main configuration file ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v("), so that it could be read only by "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" server and by utilities that run under root.")]),t._v(" "),a("li",[t._v("Copy "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(" to "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2.readonly")])]),t._v(", assign permission 644 to the new file, so that it could be read by any user but could only be changed by root.")]),t._v(" "),a("li",[t._v("In "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2.readonly")])]),t._v(" file, in the line "),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(", specify DB user with read-only permission, created above.")])]),t._v(" "),a("p",[t._v("These steps allow hiding main DB user username/password from other system users.")]),t._v(" "),a("p",[t._v("If there is no need in such access differentiation, then "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(" file access permission should be 644, so that it could be read by all users and could be changed only by root.")]),t._v(" "),a("p",[a("strong",[t._v("5. Using Special Characters in Database Password")])]),t._v(" "),a("p",[t._v("Since scheme "),a("span",{staticClass:"notranslate"},[a("code",[t._v("://user:password@host[:port]/database_name")])]),t._v(" "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Uniform_Resource_Identifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("URI"),a("OutboundLink")],1),t._v(" is used in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(" config option, then usage of special characters in user DB password is not allowed.")]),t._v(" "),a("p",[t._v("To use special symbols in the password, it must be converted to "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Percent-encoding",target:"_blank",rel:"noopener noreferrer"}},[t._v("escape-sequence"),a("OutboundLink")],1),t._v(". You can convert a password to escape-sequence in a console as follows:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("echo -n '[You_P@$$]:' | perl -MURI::Escape -ne 'print uri_escape($_).\"\\n\"'\n%5BYou_P%40%24%24%5D%3A\n")])])])]),t._v(" "),a("p",[t._v("Or replace the symbols manually:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("!    #    $    &    '    (    )    *    +    ,    /    :    ;    =    ?    @   [    ]\n%21  %23  %24  %26  %27  %28  %29  %2A  %2B  %2C  %2F  %3A  %3B  %3D  %3F  %40  %5B %5D\n")])])])]),t._v(" "),a("p",[t._v("After that "),a("span",{staticClass:"notranslate"},[a("code",[t._v("сonnect_string")])]),t._v(" will look as follows:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("сonnect_string=lvestats2:%5BYou_P%40%24%24%5D%3A@localhost/db_lvestats2\n")])])])]),t._v(" "),a("h3",{attrs:{id:"lve-stats-2-and-postgresql-db-server-compatible-work-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lve-stats-2-and-postgresql-db-server-compatible-work-setup","aria-hidden":"true"}},[t._v("#")]),t._v(" LVE Stats 2 and PostgreSQL DB Server Compatible Work Setup")]),t._v(" "),a("p",[t._v(":::tip Note\nRun all the commands below under "),a("span",{staticClass:"notranslate"},[t._v("root")]),t._v(".\n:::")]),t._v(" "),a("p",[a("strong",[t._v("1.")]),t._v(" "),a("strong",[a("span",{staticClass:"notranslate"},[t._v("PostgreSQL")])]),t._v(" "),a("strong",[t._v("Server Installation and Setup")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("PostgreSQL installation and initialization")])]),t._v(" "),a("p",[t._v("For control panels use proper documentation for installation on the links: "),a("a",{attrs:{href:"https://documentation.cpanel.net/display/CKB/Install+or+Update+PostgreSQL+on+Your+cPanel+Server",target:"_blank",rel:"noopener noreferrer"}},[t._v("сPanel"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://kb.plesk.com/en/123729",target:"_blank",rel:"noopener noreferrer"}},[t._v("Plesk"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("For non-panel CloudLinux run the following commands:")]),t._v(" "),a("ul",[a("li",[t._v("CloudLinux 6")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install postgresql-server postgresql\nservice postgresql initdb\nservice postgresql start\nchkconfig postgresql on\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("CloudLinux 7")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yum install postgresql-server postgresql\npostgresql-setup initdb\nsystemctl start postgresql\nsystemctl enable postgresql\n")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Setup")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("In "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/var/lib/pgsql/data/pg_hba.conf")])]),t._v(" config file change user authentication mode. Add the following lines (place before all other authentication parameters):")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# IPv4 local connections for lve-stats-2.x\nhost dblvestat all 127.0.0.1/32 password\n# IPv6 local connections for lve-stats-2.x\nhost dblvestat all ::1/128 password\n")])])])]),t._v(" "),a("p",[t._v("These lines enable user authentication by the password for "),a("span",{staticClass:"notranslate"},[t._v("IP4/IP6")]),t._v(" connections. You can set other modes if needed.")])]),t._v(" "),a("li",[a("p",[t._v("Apply config changes by running:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service postgresql restart\n")])])])])])])])]),t._v(" "),a("p",[a("strong",[t._v("2. DB for")]),t._v(" "),a("span",{staticClass:"notranslate"},[a("strong",[t._v("lve-stats-2.x")])]),t._v(" "),a("strong",[t._v("- Creating and Setup")])]),t._v(" "),a("ul",[a("li",[t._v("Run standard "),a("span",{staticClass:"notranslate"},[t._v("PostgreSQL psql")]),t._v(" administrative utility:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo -u postgres psql postgres \n")])])])]),t._v(" "),a("p",[t._v("OR for сPanel")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("psql -w -U postgres\n")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("In utility run:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("creating server DB. Also, check "),a("strong",[a("em",[t._v("Note")])]),t._v(" below.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE DATABASE dblvestat;\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("creating a user for "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" server to work under. Also, check "),a("strong",[a("em",[t._v("Note")])]),t._v(" below.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE USER lvestat WITH password 'passw';\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("granting "),a("span",{staticClass:"notranslate"},[t._v("lvestat")]),t._v(" user all privileges for work with "),a("span",{staticClass:"notranslate"},[t._v("dblvestat DB")]),t._v(".")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GRANT ALL privileges ON DATABASE dblvestat TO lvestat;\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("exit "),a("code",[t._v("psql")]),t._v(" utility:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\\q\n")])])])]),t._v(" "),a("p",[t._v("OR alternatively:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Ctrl+d\n")])])])])])])])]),t._v(" "),a("p",[t._v(":::tip Note\nDB name, username and their passwords above are given for an example - you can use any of your choices. Using old DB from "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats")]),t._v(" version 1 is also acceptable as "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" uses different tables and the old information will not be corrupted\n:::")]),t._v(" "),a("p",[a("strong",[t._v("3.")]),t._v(" "),a("span",{staticClass:"notranslate"},[a("strong",[t._v("Lve-stats-2.x")])]),t._v(" "),a("strong",[t._v("Setup")])]),t._v(" "),a("ul",[a("li",[t._v("Stop "),a("span",{staticClass:"notranslate"},[t._v("lve-stats2")]),t._v(" server by running:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats stop\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("In server config file "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(" edit options for connecting to DB:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("db_type = postgresql\nconnect_string=lvestat:passw@localhost/dblvestat\nIf DB is going to be used as centralized for multiple hosts then collect_usernames parameter must be changed:\ncollect_usernames=true\n")])])])]),t._v(" "),a("p",[t._v(":::tip Note\n"),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(" option value is of the format: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("user:pass@host/database")])]),t._v(". Username, password and DB name must be the same as in Database Setup section above.\n:::")]),t._v(" "),a("ul",[a("li",[t._v("After making changes in configuration files, for DB primary initialization (creating tables, indexes, etc), run:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/usr/sbin/lve-create-db \n")])])])]),t._v(" "),a("ul",[a("li",[t._v("There is no need to create anything in the DB manually. When done, restart server by running:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("4. Additional Security Settings")])]),t._v(" "),a("p",[t._v("If you need to provide access to "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats")]),t._v(" information utilities ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("lveinfo")]),t._v(", "),a("code",[t._v("lve-read-snapshot")])]),t._v(" ) for other users (or if "),a("span",{staticClass:"notranslate"},[t._v("CageFS")]),t._v(" is disabled), then in order to guarantee DB security the following steps are required:")]),t._v(" "),a("ul",[a("li",[t._v("Create a DB user with read-only permission:")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("CREATE USER lvestat_read WITH password 'passw';\nGRANT CONNECT ON DATABASE dblvestat to lvestat_read;\n\\connect dblvestat;\nGRANT SELECT ON lve_stats2_history, lve_stats2_history_gov, lve_stats2_history_x60, lve_stats2_incident, lve_stats2_servers, lve_stats2_snapshot, lve_stats2_user TO lvestat_read;\n")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Assign root ownership and permission 600 to the main configuration file ("),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v("), so that it could be read only by "),a("span",{staticClass:"notranslate"},[t._v("LVE Stats 2")]),t._v(" server and by utilities that run under root.")])]),t._v(" "),a("li",[a("p",[t._v("Copy "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")]),t._v(" to "),a("code",[t._v("/etc/sysconfig/lvestats2.readonly")])]),t._v(", assign permission 644 to the new file, so that it could be read by any user but could be changed only by root.")])]),t._v(" "),a("li",[a("p",[t._v("In "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2.readonly")])]),t._v(" file, in the line "),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(", specify DB user with read-only permission, created above.")]),t._v(" "),a("p",[t._v("These steps allow hiding main DB user username/password from other system users.")]),t._v(" "),a("p",[t._v("If there is no need in such access differentiation, then "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats2")])]),t._v(" file access permission should be 644, so that it could be read by all users and could be changed only by "),a("span",{staticClass:"notranslate"},[t._v("root")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("When done, restart server by running:")])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("5. Using Special Characters in Database Password")])]),t._v(" "),a("p",[t._v("Since scheme "),a("span",{staticClass:"notranslate"},[a("code",[t._v("://user:password@host[:port]/database_name")])]),t._v(" "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Uniform_Resource_Identifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("URI"),a("OutboundLink")],1),t._v(" is used in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("connect_string")])]),t._v(" config option, then usage of special characters in user DB password is not allowed.")]),t._v(" "),a("p",[t._v("To use special symbols in the password, it must be converted to "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Percent-encoding",target:"_blank",rel:"noopener noreferrer"}},[t._v("escape-sequence"),a("OutboundLink")],1),t._v(". You can convert a password to escape-sequence in a console as follows:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("echo -n '[You_P@$$]:' | perl -MURI::Escape -ne 'print uri_escape($_).\"\\n\"'\n%5BYou_P%40%24%24%5D%3A\n")])])])]),t._v(" "),a("p",[t._v("OR replace the symbols manually:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("!    #    $    &    '    (    )    *    +    ,    /    :    ;    =    ?    @    [    ]\n%21  %23  %24  %26  %27  %28  %29  %2A  %2B  %2C  %2F  %3A  %3B  %3D  %3F  %40  %5B  %5D\n")])])])]),t._v(" "),a("p",[t._v("After that "),a("span",{staticClass:"notranslate"},[a("code",[t._v("сonnect_string")])]),t._v(" will look as follows:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("сonnect_string=lvestats2:%5BYou_P%40%24%24%5D%3A@localhost/db_lvestats2\n")])])])]),t._v(" "),a("h3",{attrs:{id:"customize-lve-stats-2-notifications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#customize-lve-stats-2-notifications","aria-hidden":"true"}},[t._v("#")]),t._v(" Customize lve-stats-2 notifications")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("a",{attrs:{href:"http://jinja.pocoo.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jinja2"),a("OutboundLink")],1)]),t._v(" is used as a template engine for the notifications.")]),t._v(" "),a("p",[t._v("The templates for notifications are located in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/LOCALE")])]),t._v(", where "),a("span",{staticClass:"notranslate"},[a("code",[t._v("LOCALE")])]),t._v(" is the directory with localization name (language codes are formed according to "),a("span",{staticClass:"notranslate"},[t._v("ISO 639-1")]),t._v(" and "),a("span",{staticClass:"notranslate"},[t._v("ISO 639-2")]),t._v(").")]),t._v(" "),a("p",[t._v("By default the templates for English are set: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US.")])]),t._v(".")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/share/lve/emails/en_US")])]),t._v(" contains the following templates:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("admin_notify.html")]),t._v(" "),a("code",[t._v("admin_notify.txt")])]),t._v(" for administrator;")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("reseller_notify.html")]),t._v(" "),a("code",[t._v("reseller_notify.txt")])]),t._v(" for reseller;")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("user_notify.txt")])]),t._v(" for user.")])]),t._v(" "),a("p",[t._v("The notification is formed as "),a("span",{staticClass:"notranslate"},[a("em",[t._v("Multipart content type")])]),t._v(" "),a("a",{attrs:{href:"https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC1341(MIME)"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("The plain text is taken from the "),a("span",{staticClass:"notranslate"},[a("code",[t._v(".txt")])]),t._v(" files, html version - from the "),a("span",{staticClass:"notranslate"},[a("code",[t._v(".html")])]),t._v(" template.")]),t._v(" "),a("p",[t._v("In case when only one template is present ("),a("span",{staticClass:"notranslate"},[a("code",[t._v(".txt")])]),t._v(" or "),a("span",{staticClass:"notranslate"},[a("code",[t._v(".html")])]),t._v(") the notification is sent as a "),a("span",{staticClass:"notranslate"},[a("em",[t._v("Non-multipart content")])]),t._v(" type notification.")]),t._v(" "),a("p",[t._v("It is better to use "),a("span",{staticClass:"notranslate"},[a("em",[t._v("Multipart content")])]),t._v(" type notifications because when a mail client can not display an html-format message, then it will be displayed as plain text version.")]),t._v(" "),a("p",[t._v("To localize notifications, copy standard templates into directory with the proper locale name and translate the template. Also you can customize the main template making proper changes into it.")]),t._v(" "),a("p",[t._v("The list of variables that can be used in the template:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Variable")]),t._v(" "),a("td",[t._v("Example")]),t._v(" "),a("td",[t._v("Description")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("TONAME")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("Customer")])])]),t._v(" "),a("td",[t._v("Notification receiver user name. Taken from profile in the control panel, by default - "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Customer")])]),t._v(" for user, "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Administrator")])]),t._v(" for administrator, "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Reseller")])]),t._v(" for reseller.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("TOMAIL")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("support@cloudlinux.com")])])]),t._v(" "),a("td",[t._v("Notification receiver email address.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("DOMAIN")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("wordpress.test247.cloudlinux.com")])])]),t._v(" "),a("td",[t._v("Main domain. Available only for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("LOCALE")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("en_US")])])]),t._v(" "),a("td",[t._v("Locale in which the notification is sent. Available only for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("RESELLER")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("root")])])]),t._v(" "),a("td",[t._v("User reseller. Available only for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("PERIOD")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("12 hours")])])]),t._v(" "),a("td",[t._v("Verification and notification sending period.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("LOGIN")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("wordpress")])])]),t._v(" "),a("td",[t._v("User login in the system.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ID")])])]),t._v(" "),a("td",[a("code",[t._v("500")])]),t._v(" "),a("td",[t._v("User ID in the system.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lPMem")]),t._v(" "),a("code",[t._v("lEP")]),t._v(" "),a("code",[t._v("PMemF")]),t._v(" "),a("code",[t._v("lVMem")]),t._v(" "),a("code",[t._v("anyF")]),t._v(" "),a("code",[t._v("IOf")]),t._v(" "),a("code",[t._v("VMemF")]),t._v(" "),a("code",[t._v("lCPU")]),t._v(" "),a("code",[t._v("aIOPS")]),t._v(" "),a("code",[t._v("aEP")]),t._v(" "),a("code",[t._v("aPMem")]),t._v(" "),a("code",[t._v("IOPSf")]),t._v(" "),a("code",[t._v("lIO")]),t._v(" "),a("code",[t._v("lIOPS")]),t._v(" "),a("code",[t._v("aIO")]),t._v(" "),a("code",[t._v("EPf")]),t._v(" "),a("code",[t._v("aCPU")]),t._v(" "),a("code",[t._v("aVMem")]),t._v(" "),a("code",[t._v("NprocF")]),t._v(" "),a("code",[t._v("aNproc")]),t._v(" "),a("code",[t._v("lNproc")]),t._v(" "),a("code",[t._v("CPUf")])])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("See description in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("lveinfo --help")])]),t._v(" output. Available only for users")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("STATS_HTML")])])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("html table with the list of users that exceeded limits. Available for administrator and reseller.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("STATS")])])]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("ASCII - table with the list of users that exceeded limits. Available only for admins and resellers.")])])])]),t._v(" "),a("p",[t._v("Sender’s email address by default is administrator email address from control panel settings "),a("span",{staticClass:"notranslate"},[a("code",[t._v("(root@{hostn_name}")])]),t._v(" if there is no email in the control panel).")]),t._v(" "),a("p",[t._v("It can be changed with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_EMAIL")])]),t._v(" option in the config "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats.config/StatsNotifier.cfg")])])]),t._v(" "),a("p",[t._v("For example:")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_EMAIL=support@hostername.com")])])]),t._v(" "),a("p",[t._v("To apply changes restart "),a("span",{staticClass:"notranslate"},[a("code",[t._v("lve-stats")])]),t._v(" service:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart\n")])])])]),t._v(" "),a("p",[t._v("for CloudLinux 7")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("systemctl restart lvestats.service\n")])])])]),t._v(" "),a("p",[t._v("Default subject is "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Hosting account resources exceeded")])]),t._v(".  It can be changed for each template (and for localized templates as well). To change subject, in the very beginning of the file (no blank lines allowed in the beginning of the template) add the field "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Subject:")])]),t._v(", leave two blank lines after it and add template body.")]),t._v(" "),a("p",[t._v("Customized subjects can be taken only from the templates with the resolution "),a("span",{staticClass:"notranslate"},[a("code",[t._v("*.txt")])]),t._v(" "),a("span",{staticClass:"notranslate"},[t._v("("),a("code",[t._v("admin_notify.txt")]),t._v(", "),a("code",[t._v("reseller_notify.txt")]),t._v(", "),a("code",[t._v("user_notify.txt")]),t._v(")")]),t._v(". Changes apply without "),a("span",{staticClass:"notranslate"},[a("code",[t._v("lvestats")])]),t._v(" restart.")]),t._v(" "),a("p",[t._v("For backward compatibility the subject can be also changed with the key "),a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_SUBJECT")])]),t._v(" in the config "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/etc/sysconfig/lvestats.config/StatsNotifier.cfg")])]),t._v(".")]),t._v(" "),a("p",[t._v("Customized subjects have the higher priority than the key "),a("span",{staticClass:"notranslate"},[a("code",[t._v("NOTIFY_FROM_SUBJECT")])]),t._v(".")]),t._v(" "),a("p",[t._v("Example for the file "),a("span",{staticClass:"notranslate"},[a("code",[t._v("user_notify.txt")])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Subject: Customized subject example\nDear {{TONAME}},\n\n \nYour {{DOMAIN}} web hosting account exceeded one or more of its resources within the last {{PERIOD}}.\n{% if epf %}Exceeded the maximum of {{lep}} concurrent website connections. Your website was not available {{epf}} times because of this problem.\n{% endif %}{% if pmemf %}Exceeded the physical memory limit of {{lpmem}}KB. Your website was not available {{pmemf}} times because of this problem.\n{% endif %}{% if vmemf %}Exceeded the virtual memory limit of {{lvmem}}KB. Your website was not available {{vmemf}} times because of this problem.\n{% endif %}{% if nprocf %}Exceeded the number of processes limit of {{lnproc}}. Your website was not available {{nprocf}} times because of this problem.\n{% endif %}{% if cpuf %}You reached limit of {{lcpu}} of total server CPU usage {{cpuf}} times. Your website was forced to load slower to reduce its CPU usage.\n{% endif %}{% if iof %}You reached limit of {{lio}}KB/s disk io rate {{iof}} times. The disk io speed for your account was slowed as a result of this problem.\n{% endif %}{% if iopsf %}You reached limit of {{liops}} I/O operations {{iopsf}} times. The disk io speed for your account was slowed as a result of this problem.\n{% endif %}\n \nTo view full details about your web hosting account\'s resource usage, including the time of each incident listed above, please click the link below and log into your cpanel hosting control panel, then click the "Resource Usage" link under the "Logs and Statistics" section.\nhttp://{{DOMAIN}}:2083\n \nIf your account is regularly exceeding it\'s available resources, please consider upgrading to a higher level hosting plan that includes more resources. If you have any questions or need help with anything, just reply to this email and let us know.\n \nSincerely,\n \nYour Friendly Web Hosting Support Team\n')])])])]),t._v(" "),a("h2",{attrs:{id:"command-line-tools"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#command-line-tools","aria-hidden":"true"}},[t._v("#")]),t._v(" Command-line Tools")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/lveinfo")])])]),t._v(" "),a("td",[t._v("utility to display historical information about LVE usage.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/lvechart")])])]),t._v(" "),a("td",[t._v("creates a chart representing LVE usage for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/dbgovchart")])])]),t._v(" "),a("td",[t._v("creates a chart representing MySQL usage for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/lve-read-snapshot")])])]),t._v(" "),a("td",[t._v("displays information from system state (snapshots) for user.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/lve-create-db")])])]),t._v(" "),a("td",[t._v("creates/recreates database for "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/cloudlinux-top")])])]),t._v(" "),a("td",[t._v("utility provides information about current MySQL and LVE usage of a running system in JSON format.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("/usr/sbin/cloudlinux-statistics")])])]),t._v(" "),a("td",[t._v("utility provides historical information about resource usage.")])])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"lveinfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lveinfo","aria-hidden":"true"}},[t._v("#")]),t._v(" lveinfo")])]),t._v(" "),a("p",[t._v(":::tip Note\n"),a("span",{staticClass:"notranslate"},[t._v("lve-stats-2.2-2")]),t._v("\n:::")]),t._v(" "),a("p",[a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lveinfo [-h] [-v] [--dbgov DBGOV] [-f YYYY-MM-DD[HH:MM]]\n\n              [-t YYYY-MM-DD[HH:MM]] [--period PERIOD] [-u USER | --id ID]\n\n              [-d] [-o ALIAS] [-b ALIAS [ALIAS ...]] [-p 0..100]\n\n              [--by-fault ALIAS [ALIAS ...]] [-r FAULTS]\n\n              [--style {user,admin}] [-l LIMIT] [-c [PATH] | -j]\n\n              [--server_id SERVER_ID] [--servers-info]\n\n              [--show-all | --show-columns COLUMN_NAME [COLUMN_NAME ...]]\n\n              [--time-unit TIME_UNIT] [-m {v1,v2}]\n\n              [--blank-value [BLANK_VALUE]]\n")])])])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lveinfo")])]),t._v(" is an utility to display historical information about LVE usage.")]),t._v(" "),a("p",[a("strong",[t._v("Optional arguments")])]),t._v(" "),a("ul",[a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-h, --help")])]),t._v(" – show this help message and exit")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-v, --version")])]),t._v(" – show program's version number and exit")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--dbgov DBGOV")])]),t._v(" – show "),a("span",{staticClass:"notranslate"},[t._v(" MySql Governor")]),t._v(" statistic")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-u USER, --user USER")])]),t._v(" – use username instead of "),a("span",{staticClass:"notranslate"},[t._v(" LVE id")]),t._v(", and show only record for that user")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--id ID")])]),t._v(" – will display record only for that "),a("span",{staticClass:"notranslate"},[t._v(" LVE id")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-d, --display-username")])]),t._v(" – try to convert "),a("span",{staticClass:"notranslate"},[t._v(" LVE id")]),t._v(" into username when possible")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-o ALIAS, --order-by ALIAS")])]),t._v(" – orders results by one of the following:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aCPU")])])]),t._v(" "),a("td",[t._v("average CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mCPU")])])]),t._v(" "),a("td",[t._v("max CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_cpu_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("CPUf")])])]),t._v(" "),a("td",[t._v("total number of max CPU usage faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aVMem")])])]),t._v(" "),a("td",[t._v("average virtual memory usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aEP")])])]),t._v(" "),a("td",[t._v("average number of entry processes (concurrent connections)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mEP")])])]),t._v(" "),a("td",[t._v("max number of entry processes (concurrent connections)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_ep_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("EPf")])])]),t._v(" "),a("td",[t._v("total number of max entry processes faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aPMem")])])]),t._v(" "),a("td",[t._v("average physical memory usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mPMem")])])]),t._v(" "),a("td",[t._v("max physical memory usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aNproc")])])]),t._v(" "),a("td",[t._v("average number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mNproc")])])]),t._v(" "),a("td",[t._v("max number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIO")])])]),t._v(" "),a("td",[t._v("average io usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIO")])])]),t._v(" "),a("td",[t._v("max io usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_pmem_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("PMemF")])])]),t._v(" "),a("td",[t._v("total number of out of physical memory faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_nproc_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NprocF")])])]),t._v(" "),a("td",[t._v("total number of max processes faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_io_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOf")])])]),t._v(" "),a("td",[t._v("total number of max io faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIOPS")])])]),t._v(" "),a("td",[t._v("average io operations (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIOPS")])])]),t._v(" "),a("td",[t._v("max io operations (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("total_iops_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOPSf")])])]),t._v(" "),a("td",[t._v("total number of max io operations faults (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("any_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("anyF")])])]),t._v(" "),a("td",[t._v("total number of faults of all types")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-b ALIAS [ALIAS ...]")]),t._v(" "),a("code",[t._v("--by-usage ALIAS [ALIAS ...]")])]),t._v(" – show LVEs with usage (averaged) within 90 percent of the limit available values:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aCPU")])])]),t._v(" "),a("td",[t._v("average CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mCPU")])])]),t._v(" "),a("td",[t._v("max CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aVMem")])])]),t._v(" "),a("td",[t._v("average virtual memory usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mVMem")])])]),t._v(" "),a("td",[t._v("max virtual memory usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aEP")])])]),t._v(" "),a("td",[t._v("average number of entry processes (concurrent connections)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mEP")])])]),t._v(" "),a("td",[t._v("max number of entry processes (concurrent connections)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aPMem")])])]),t._v(" "),a("td",[t._v("average physical memory usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mPMem")])])]),t._v(" "),a("td",[t._v("max physical memory usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aNproc")])])]),t._v(" "),a("td",[t._v("average number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mNproc")])])]),t._v(" "),a("td",[t._v("max number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIO")])])]),t._v(" "),a("td",[t._v("average io usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIO")])])]),t._v(" "),a("td",[t._v("max io usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_avg")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIOPS")])])]),t._v(" "),a("td",[t._v("average io operations (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_max")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIOPS")])])]),t._v(" "),a("td",[t._v("max io operations (LVE version >= 8)")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-p 0..100")]),t._v(", "),a("code",[t._v("--percentage 0..100")])]),t._v(" – defines percentage for "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-usage")])]),t._v(" option; default "),a("code",[t._v("90")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--style {user,admin}")])]),t._v(" – deprecated, not used.")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-l LIMIT")]),t._v(", "),a("code",[t._v("--limit LIMIT")])]),t._v(" – max number of results to display, "),a("code",[t._v("10")]),t._v(" by default, if "),a("code",[t._v("0")]),t._v(" no limit")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-c [PATH]")]),t._v(", "),a("code",[t._v("--csv [PATH]")])]),t._v(" – save statistics in CSV format; "),a("code",[t._v("-")]),t._v(" by default (output to screen)")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-j")]),t._v(", "),a("code",[t._v("--json")])]),t._v(" – display output in JSON format")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--server_id SERVER_ID")])]),t._v(" – used with central database for multiple servers, default "),a("span",{staticClass:"notranslate"},[a("code",[t._v("localhost")])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--servers-info")])]),t._v(" – show servers LVE versions")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--show-all")])]),t._v(" – full output (show all limits); brief output is default; equivalent "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--show-columns all")])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-show-columns COLUMN_NAME [COLUMN_NAME ...]")])]),t._v(" – show only the listed columns; "),a("span",{staticClass:"notranslate"},[a("code",[t._v("all")])]),t._v(" for all supported columns")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v("COLUMN_NAME")])]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("From")])])]),t._v(" "),a("td",[t._v("Show start period statistics")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("To")])])]),t._v(" "),a("td",[t._v("Show end period statistics")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ID")])])]),t._v(" "),a("td",[t._v("LVE Id or username")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aCPU")])])]),t._v(" "),a("td",[t._v("Average "),a("span",{staticClass:"notranslate"},[t._v(" CPU")]),t._v(" usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uCPU")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource "),a("span",{staticClass:"notranslate"},[t._v("CPU")])])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mCPU")])])]),t._v(" "),a("td",[t._v("deprecated")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lCPU")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" limit")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("CPUf")])])]),t._v(" "),a("td",[t._v("Out Of "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" usage Faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aEP")])])]),t._v(" "),a("td",[t._v("Average Entry Processes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uEP")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource Entry processes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mEP")])])]),t._v(" "),a("td",[t._v("deprecated")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lEP")])])]),t._v(" "),a("td",[t._v("maxEntryProc limit")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aVMem")])])]),t._v(" "),a("td",[t._v("Average Virtual Memory Usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uVMem")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource Virtual Memory")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mVMem")])])]),t._v(" "),a("td",[t._v("deprecated")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lVMem")])])]),t._v(" "),a("td",[t._v("Virtual Memory Limit")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("VMemF")])])]),t._v(" "),a("td",[t._v("Out Of Memory Faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("EPf")])])]),t._v(" "),a("td",[t._v("Entry processes faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aPMem")])])]),t._v(" "),a("td",[t._v("Average Physical Memory Usage (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uPMem")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource Physical Memory (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mPMem")])])]),t._v(" "),a("td",[t._v("deprecated (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lPMem")])])]),t._v(" "),a("td",[t._v("Physical Memory Limit (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aNproc")])])]),t._v(" "),a("td",[t._v("Average Number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uNproc")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource Number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mNproc")])])]),t._v(" "),a("td",[t._v("deprecated (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lNproc")])])]),t._v(" "),a("td",[t._v("Limit of Number of processes (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("PMemF")])])]),t._v(" "),a("td",[t._v("Out Of Physical Memory Faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NprocF")])])]),t._v(" "),a("td",[t._v("Number of processes faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIO")])])]),t._v(" "),a("td",[t._v("Average "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uIO")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIO")])])]),t._v(" "),a("td",[t._v("deprecated (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lIO")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" Limit (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOf")])])]),t._v(" "),a("td",[t._v("Out Of "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" usage Faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("aIOPS")])])]),t._v(" "),a("td",[t._v("Average "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" Operations (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mIOPS")])])]),t._v(" "),a("td",[t._v("deprecated (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("uIOPS")])])]),t._v(" "),a("td",[t._v("The percentage of user-allocated resource "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" Operations (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lIOPS")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" Operations Limit (LVE version >= 8) ")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOPSf")])])]),t._v(" "),a("td",[t._v("Out Of "),a("span",{staticClass:"notranslate"},[t._v("I/O")]),t._v(" Operations Faults (LVE version >= 8)")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--time-unit TIME_UNIT")])]),t._v(" – time step for grouping statistic in minutes; 1 min., by default; can use "),a("span",{staticClass:"notranslate"},[a("code",[t._v("m\\|h\\|d")])]),t._v(" suffixes; for example: "),a("code",[t._v("1h or 1h30m or 1d12h")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-m {v1,v2}")]),t._v(", "),a("code",[t._v("--compat {v1,v2}")])]),t._v(" – "),a("code",[t._v("v1")]),t._v(" - return old output mode; "),a("code",[t._v("v2")]),t._v(" - new mode; default "),a("code",[t._v("v1")]),t._v("; you can change default in config")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--blank-value [BLANK_VALUE]")])]),t._v(" – Use to fill unsupported limits; default "),a("code",[t._v("-")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-f YYYY-MM-DD[ HH:MM]")]),t._v(",  "),a("code",[t._v("--from YYYY-MM-DD[ HH:MM]")])]),t._v(" – run report from date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("[YY]YY-MM-DD[ HH:MM]")])]),t._v(" format; if not present last 10 minutes are assumed")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-t YYYY-MM-DD[ HH:MM]")]),t._v(",  "),a("code",[t._v("--to YYYY-MM-DD[ HH:MM]")])]),t._v(" – run report up to date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("[YY]YY-MM-DD[ HH:MM]")])]),t._v(" format; if not present, reports results up to now")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--period PERIOD")])]),t._v(" – time period; specify minutes with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("m")]),t._v(", "),a("code",[t._v("h")])]),t._v(" - hours, days with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("d")])]),t._v(", and values: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")]),t._v(", "),a("code",[t._v("yesterday")]),t._v("; "),a("code",[t._v("5m")])]),t._v(" - last 5 minutes, "),a("code",[t._v("4h")]),t._v(" - last four hours, "),a("code",[t._v("2d")]),t._v(" - last 2 days, as well as "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-fault ALIAS [ALIAS ...]")])]),t._v(" – show LVEs which failed on max processes limit or memory limit")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[t._v("ALIAS")])]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mcpu")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("CPUf")])])]),t._v(" "),a("td",[t._v("total number of max CPU usage faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("VMemF")])])]),t._v(" "),a("td",[t._v("total number of out of virtual memory faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mep")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("EPf")])])]),t._v(" "),a("td",[t._v("total number of max entry processes faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("PMemF")])])]),t._v(" "),a("td",[t._v("total number of out of physical memory faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("NprocF")])])]),t._v(" "),a("td",[t._v("total number of max processes faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOf")])])]),t._v(" "),a("td",[t._v("total number of max io faults (LVE version >= 6)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("IOPSf")])])]),t._v(" "),a("td",[t._v("total number of max io operations faults (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("any_faults")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("any")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("anyF")])])]),t._v(" "),a("td",[t._v("total number of faults of all types")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-r FAULTS, --threshold FAULTS")])]),t._v("– in combination with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-fault")])]),t._v(", shows only LVEs with number of faults above; default "),a("code",[t._v("1")])])])]),t._v(" "),a("p",[t._v("Prefixes "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Kb")]),t._v(", "),a("code",[t._v("Mb")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("Gb")])]),t._v(" indicates powers of 1024.")]),t._v(" "),a("p",[t._v(":::tip Note\nAll "),a("span",{staticClass:"notranslate"},[t._v("ALIAS")]),t._v(" options are not case sensitive.\n:::")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"lvechart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lvechart","aria-hidden":"true"}},[t._v("#")]),t._v(" lvechart")])]),t._v(" "),a("p",[a("code",[t._v("/usr/sbin/lvechart")]),t._v(" - creates a chart representing LVE usage for user.")]),t._v(" "),a("p",[a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/usr/sbin/lvechart [OPTIONS]\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("Acceptable options")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--help")])])]),t._v(" "),a("td",[t._v("This help screen")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--version")])])]),t._v(" "),a("td",[t._v("Version number")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--from")])])]),t._v(" "),a("td",[t._v("Run report from date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format (if not present, last 10 minutes are assumed)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--to=")])])]),t._v(" "),a("td",[t._v("Run report up to date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format (if not present, reports results up to now)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--period=")])])]),t._v(" "),a("td",[t._v("Time period: specify minutes with "),a("code",[t._v("m")]),t._v(", "),a("code",[t._v("h")]),t._v(" - hours, days with "),a("code",[t._v("d")]),t._v(", and values: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")])]),t._v(", "),a("span",{staticClass:"notranslate"},[a("code",[t._v("yesterday")])]),t._v("; "),a("code",[t._v("5m")]),t._v(" - last 5 minutes, "),a("code",[t._v("4h")]),t._v(" - last four hours, "),a("code",[t._v("2d")]),t._v(" - last 2 days, as well as today")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--id=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("LVE id")])]),t._v(" will display record only for that "),a("span",{staticClass:"notranslate"},[t._v("LVE id")])])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--user=")])])]),t._v(" "),a("td",[t._v("Use username instead of "),a("span",{staticClass:"notranslate"},[t._v(" LVE id ")]),t._v(", and show only record for that user")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--server=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("Server id")])]),t._v(" will display record for that server, instead of default (current)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--output=")])])]),t._v(" "),a("td",[t._v("Filename to save chart as, if not present, output will be sent to STDOUT")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--show-all")])])]),t._v(" "),a("td",[t._v("Show all graphs (by default shows graphs for which limits are set)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--style=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("admin")]),t._v(", "),a("code",[t._v("user")])]),t._v(" set chart style,  "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" limits are normalized to 100% in user’s style")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--format=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("svg")]),t._v(", "),a("code",[t._v("png")])]),t._v(" set chart output format")])])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"dbgovchart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dbgovchart","aria-hidden":"true"}},[t._v("#")]),t._v(" dbgovchart")])]),t._v(" "),a("p",[a("code",[t._v("/usr/sbin/dbgovchart")]),t._v(" - creates a chart representing MySQL usage for user.`")]),t._v(" "),a("p",[a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/usr/sbin/dbgovchart [OPTIONS]\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("Acceptable options")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--help")])])]),t._v(" "),a("td",[t._v("This help screen")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--version")])])]),t._v(" "),a("td",[t._v("Version number")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--from=")])])]),t._v(" "),a("td",[t._v("Run report from date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format (if not present, last 10 minutes are assumed)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--to=")])])]),t._v(" "),a("td",[t._v("Run report up to date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format (if not present, reports results up to now)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--period=")])])]),t._v(" "),a("td",[t._v("Time period: specify minutes with "),a("code",[t._v("m")]),t._v(",  "),a("code",[t._v("h")]),t._v(" - hours, days with "),a("code",[t._v("d")]),t._v(", and values: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")])]),t._v(", "),a("span",{staticClass:"notranslate"},[a("code",[t._v("yesterday")])]),t._v("; "),a("code",[t._v("5m")]),t._v(" - last 5 minutes, "),a("code",[t._v("4h")]),t._v(" - last four hours, "),a("code",[t._v("2d")]),t._v(" - last 2 days, as well as today`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--user=")])])]),t._v(" "),a("td",[t._v("mysql username")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--output=")])])]),t._v(" "),a("td",[t._v("Filename to save chart as, if not present, output will be sent to "),a("span",{staticClass:"notranslate"},[t._v("STDOUT")])])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--show-all")])])]),t._v(" "),a("td",[t._v("Show all graphs (by default shows graphs for which limits are set)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--server=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("Server id")])]),t._v(" will display record for that server, instead of default (current)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--style=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("admin")]),t._v(", "),a("code",[t._v("user")])]),t._v(" set chart style,  "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" limits are normalized to 100% in user’s style")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--format=")])])]),t._v(" "),a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("svg")]),t._v(", "),a("code",[t._v("png")])]),t._v(" set chart output format")])])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"lve-read-snapshot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lve-read-snapshot","aria-hidden":"true"}},[t._v("#")]),t._v(" lve-read-snapshot")])]),t._v(" "),a("p",[a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lve-read-snapshot [-h] [--version] [-f FROM [FROM ...]] [-t TO [TO ...]\n                  [ -p PERIOD | --timestamp TIMESTAMP]\n                  [-i ID | -u USER] [-l] [-o file] [-j] [--stats]\n                  [--unit unit]\n")])])])]),t._v(" "),a("p",[t._v("Reads LVE system state snapshots for "),a("span",{staticClass:"notranslate"},[t._v("LVE/user")]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("Optional arguments")])]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-h, --help")])]),t._v(" – show this help message and exit")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--version")])]),t._v(" – version number")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-f FROM [FROM ...]")]),t._v(", "),a("code",[t._v("--from FROM [FROM ...]")])]),t._v(" – run report from date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format, if not present last 10 minutes are assumed (default: "),a("code",[t._v("2016-10-24 19:28")]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-t TO [TO ...]")]),t._v(", "),a("code",[t._v("--to TO [TO ...]")])]),t._v(" – run report up to date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("YYYY-MM-DD HH:MM")])]),t._v(" format, if not present, reports results up to now (default: "),a("code",[t._v("2016-10-24 19:38")]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-p PERIOD")]),t._v(", "),a("code",[t._v("--period PERIOD")])]),t._v(" – time period specify minutes with "),a("code",[t._v("m")]),t._v(", "),a("code",[t._v("h")]),t._v(" - hours, days with "),a("code",[t._v("d")]),t._v(", and values: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")]),t._v(", "),a("code",[t._v("yesterday")])]),t._v(", "),a("code",[t._v("5m")]),t._v(" - last 5 minutes, "),a("code",[t._v("4h")]),t._v(" - last four hours, "),a("code",[t._v("2d")]),t._v(" - last 2 days, as well as today (default: "),a("code",[t._v("10m")]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--timestamp TIMESTAMP")])]),t._v(" – time stamp in unix format for get one snapshot (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("None")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-i ID, --id ID")])]),t._v(" – LVE id to show records for (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("None")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-u USER")]),t._v(", "),a("code",[t._v("--user USER")])]),t._v(" – user account to show records for (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("None")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-l")]),t._v(", "),a("code",[t._v("--list")])]),t._v(" – show timestamp list only (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-o file")]),t._v(", "),a("code",[t._v("--output file")])]),t._v(" – filename to save snaphots report to, if not present,output will be sent to "),a("span",{staticClass:"notranslate"},[t._v("STDOUT")]),t._v(" (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("None")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-j")]),t._v(", "),a("code",[t._v("--json")])]),t._v(" – output in json format (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--stats")])]),t._v(" – output stats, instead of snapshots (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--unit unit")])]),t._v(" – group stats by time unit. Example values "),a("code",[t._v("3h")]),t._v(", "),a("code",[t._v("24h")]),t._v(", "),a("code",[t._v("1d")]),t._v(", "),a("code",[t._v("1w")]),t._v(". Other possible value is "),a("span",{staticClass:"notranslate"},[a("code",[t._v("auto")])]),t._v(" for grouping by each incident (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("1d")])]),t._v(")")])]),t._v(" "),a("p",[t._v("One of "),a("span",{staticClass:"notranslate"},[a("code",[t._v("-u --user")])]),t._v(" or "),a("span",{staticClass:"notranslate"},[a("code",[t._v("-i --id")])]),t._v(" should be specified.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"lve-create-db"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lve-create-db","aria-hidden":"true"}},[t._v("#")]),t._v(" lve-create-db")])]),t._v(" "),a("p",[a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("lve-create-db [-h] [--recreate] [--print-sql]\n                   [--update-serverid-prompt] [--update-serverid-auto]\n                   [--validate]\n")])])])]),t._v(" "),a("p",[t._v("Creates a database for "),a("span",{staticClass:"notranslate"},[t._v("lve-stats")]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("Optional arguments")])]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-h")]),t._v(", "),a("code",[t._v("--help")])]),t._v(" – show this help message and exit")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--recreate")])]),t._v(" – drops and recreates database even if tables exists (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--print-sql")])]),t._v(" – prints sql and exits, without creating db (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--update-serverid-prompt")])]),t._v(" – update exist server ID or create new one (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--update-serverid-auto")])]),t._v(" – update exist server ID with "),a("span",{staticClass:"notranslate"},[t._v("uuid")]),t._v(" (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--validate")])]),t._v(" – check the correctness of the database structure (default: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("False")])]),t._v(")")])]),t._v(" "),a("h3",{attrs:{id:"cloudlinux-top"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cloudlinux-top","aria-hidden":"true"}},[t._v("#")]),t._v(" cloudlinux-top")]),t._v(" "),a("p",[t._v("Utility provides information about current MySQL and LVE usage of a running system in JSON format.")]),t._v(" "),a("h4",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cloudlinux_top [-h] [-v] [-j] [--hide-mysql]\n               [-u USERNAME | -r FOR_RESELLER] [-d DOMAIN] [-m MAX]\n               [-o ORDER_BY]\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("Optional arguments")])]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-h, --help")])]),t._v(" – show this help message and exit")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-v, --version")])]),t._v(" – show program version number and exit")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-j, --json")])]),t._v(" – return data in JSON format")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--hide-mysql")])]),t._v(" | `don't show MySQL related info")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-u USERNAME")]),t._v(", "),a("code",[t._v("--username USERNAME")])]),t._v(" – show data only for a specific user. Can be used to filter the output; returns users with username "),a("span",{staticClass:"notranslate"},[a("code",[t._v("%USERNAME%")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-r FOR_RESELLER")]),t._v(", "),a("code",[t._v("--for-reseller FOR_RESELLER")])]),t._v(" – get information only about specified reseller and his users")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-d DOMAIN")]),t._v(", "),a("code",[t._v("--domain DOMAIN")])]),t._v(" – show data only for a specific domain. Can be used to filter the output; returns users with domain "),a("span",{staticClass:"notranslate"},[a("code",[t._v("%DOMAIN%")])])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-m MAX")]),t._v(", "),a("code",[t._v("--max MAX")])]),t._v(" – show up to "),a("span",{staticClass:"notranslate"},[a("code",[t._v("N")])]),t._v(" records. If "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--max")])]),t._v(" key is omitted. By default will show top 25 users")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-o ORDER_BY")]),t._v(", "),a("code",[t._v("--order-by ORDER_BY")])]),t._v(" – sort output by resource usage; available options: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")]),t._v(", "),a("code",[t._v("mysql_cpu")]),t._v(", "),a("code",[t._v("io")]),t._v(", "),a("code",[t._v("mysql_io")]),t._v(", "),a("code",[t._v("iops")]),t._v(", "),a("code",[t._v("ep")]),t._v(", "),a("code",[t._v("nproc")]),t._v(", "),a("code",[t._v("pmem")])])])]),t._v(" "),a("h4",{attrs:{id:"output-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-format","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Output format")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "mySqlGov": "enabled",              # possible values: enabled, error\n  "mySqlGovMode": "abusers",          # see “MySQL Governor > Modes Of Operation”\n                                      # if MySQL Governor is not enabled, value is "none"\n \n  "resellers": [                      # list of resellers (available only with\n                                      # reseller limits feature)\n      {\n          "id": 1000020005,           # internal record id\n          "limit": <lve_section>,     # current limits (last 5 seconds)\n          "name": "reseller_name",    # reseller’s login in control panel\n          "usage": <lve_section>      # current usage (last 5 seconds)\n      }\n  ],\n  "result": "success",                # see the ‘errors handling’ section\n  "timestamp": 1522858537.337549,\n  "users": [\n      {\n          "domain": "domain.com",     # user’s primary domain (from control panel)\n          "id": 20005,                # lve_id, same as user id in /etc/passwd file\n          "limit": <lve_section>,     # limits for last 5 seconds\n          "reseller": "reseler1",     # user’s reseller (from control panel)\n          "usage": <lve_section>,     # usage for last 5 seconds\n          "username": "user"          # username from /etc/passwd file or “N/A” if user\n                                      # with such id does not exist\n       }\n   ]\n }\n')])])])]),t._v(" "),a("p",[t._v("The structure"),a("sup",[t._v(" *")]),t._v(" of "),a("span",{staticClass:"notranslate"},[a("code",[t._v("<lve_section>")])]),t._v(":")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n"cpu": {\n "all": 50.0,      # CPU usage or limit (LVE only)\n "mysql": 0.0*     # CPU usage or limit (MySQL Governor only)\n},\n"ep": 1.0,           # number of entry processes\n"io": {\n "all": 0.0,       # IO usage or limit (LVE only)\n "mysql": 0.0**     # IO usage or limit (MySQL Governor only)\n},\n"iops": 0.0,         # IO operations per second\n"mem": 258048,       # memory usage or limit\n"pno": 1.0           # number of processes\n}\n')])])])]),t._v(" "),a("p",[t._v(":::tip Note")]),t._v(" "),a("ul",[a("li",[t._v("you can modify this structure using "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--show")])]),t._v(" option, see "),a("router-link",{attrs:{to:"/lve-stats_2/#examples"}},[t._v("usage examples")]),t._v(" for details.")],1),t._v(" "),a("li",[t._v("MySQL values are only present when "),a("span",{staticClass:"notranslate"},[t._v("MySQL Governor")]),t._v(" statistics is available and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--hide-mysql")])]),t._v(" options is not used.\n:::")])]),t._v(" "),a("h4",{attrs:{id:"units-of-measurement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#units-of-measurement","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Units of measurement")])]),t._v(" "),a("p",[t._v("For "),a("span",{staticClass:"notranslate"},[a("code",[t._v("limits")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("usage")])]),t._v(" sections we use the following units of measurement.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Value")])]),t._v(" "),a("td",[a("strong",[t._v("Units of measurement")])])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" cpu (lve and mysql) ")])]),t._v(" "),a("td",[t._v("percentage of one "),a("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" core")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" io (lve and mysql) ")])]),t._v(" "),a("td",[t._v("bytes per second")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" iops ")])]),t._v(" "),a("td",[t._v("number of "),a("span",{staticClass:"notranslate"},[t._v(" IO ")]),t._v(" operations per second")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" mem ")])]),t._v(" "),a("td",[t._v("bytes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" ep ")])]),t._v(" "),a("td",[t._v("number of entry processes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v(" pno ")])]),t._v(" "),a("td",[t._v("number of processes")])])])]),t._v(" "),a("h4",{attrs:{id:"errors-handling"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errors-handling","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Errors handling")])]),t._v(" "),a("p",[t._v("The format of the error message is the same as in the other "),a("span",{staticClass:"notranslate"},[a("code",[t._v("cloudlinux- *")])]),t._v(" utilities. When everything is ok, the "),a("span",{staticClass:"notranslate"},[a("code",[t._v("result")])]),t._v(" value is "),a("span",{staticClass:"notranslate"},[a("code",[t._v("success")])]),t._v(". Otherwise, it contains error message. In case of unexpected errors, the output will be as follows.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# cloudlinux-top --json \n{\n  "context": {\n      "error_text": "Very bad error"\n  },\n  "result": "An error occured: \\"%(error_text)s\\"",\n  "timestamp": 1523871939.639394\n}\n')])])])]),t._v(" "),a("h4",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Examples")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("get 100 users ordered by "),a("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" usage")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-top --json --order-by cpu --max=100\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("get information about one user")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-top --json -u username\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("get information about reseller and his users")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-top --json --for-reseller=reseller_name\n")])])])])]),t._v(" "),a("li",[a("p",[t._v("show only "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" limits and usage")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-top --json --show=io\n")])])])])])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("h3",{attrs:{id:"cloudlinux-statistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cloudlinux-statistics","aria-hidden":"true"}},[t._v("#")]),t._v(" cloudlinux-statistics")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v("cloudlinux-statistics")]),t._v(" is a "),a("span",{staticClass:"notranslate"},[t._v("CLI")]),t._v(" utility that provides historical information about resource usage.")]),t._v(" "),a("h4",{attrs:{id:"usage-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cloudlinux-statistics [-h] [-j] [-v] [--by-usage BY_USAGE]\n                      [--percentage 0..100] [--by-fault BY_FAULT]\n                      [--threshold THRESHOLD] [--server_id SERVER_ID]\n                      [-f FROM] [-t TO] [--period PERIOD]\n                      [--limit LIMIT]\n                      [--show COLUMN_NAME [COLUMN_NAME ...]]\n                      [-o ORDER_BY] [--id ID] [--time-unit TIME_UNIT]\n                      [-r FOR_RESELLER]\n")])])])]),t._v(" "),a("p",[a("strong",[t._v("Optional arguments")])]),t._v(" "),a("ul",[a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-h")]),t._v(", "),a("code",[t._v("--help")])]),t._v(" – show this help message and exit")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-j")]),t._v(", "),a("code",[t._v("--json")])]),t._v(" – return data in JSON format")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-v")]),t._v(", "),a("code",[t._v("--version")])]),t._v(" – show program version number and exit")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--server_id SERVER_ID")]),t._v(", "),a("code",[t._v("--server-id SERVER_ID")])]),t._v(" – can be used with the central database for multiple servers; default "),a("code",[t._v("...")])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--limit LIMIT")])]),t._v(" – limit the number of results to display, "),a("code",[t._v("0")]),t._v(" is unlimited")])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--show COLUMN_NAME [COLUMN_NAME ...]")])]),t._v(" – show only listed columns; "),a("span",{staticClass:"notranslate"},[a("code",[t._v("all")])]),t._v(" for all supported columns (fields)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("span",{staticClass:"notranslate"},[t._v("Key")])]),t._v(" "),a("td",[t._v("Fields to show")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("all")])])]),t._v(" "),a("td",[t._v("all available fields")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[t._v("CPU field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[t._v("IO field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[t._v("IOPS field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[t._v("entry processes (concurrent connections) field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[t._v("number of processes field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[t._v("physical memory field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[t._v("virtual memory field")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql")])])]),t._v(" "),a("td",[a("code",[t._v("mysql_cpu")]),t._v(" & "),a("code",[t._v("mysql_io")]),t._v(" field")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-o ORDER_BY")]),t._v(", "),a("code",[t._v("--order-by ORDER_BY")])]),t._v(" – order results by one of the following keys (fields):")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("FIELD")]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("any_faults")])])]),t._v(" "),a("td",[t._v("total number of faults of all types")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[t._v("average CPU usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql_cpu")])])]),t._v(" "),a("td",[t._v("average MySQL CPU usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[t._v("average IO usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql_io")])])]),t._v(" "),a("td",[t._v("average MySQL IO usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[t._v("average IO operations; (LVE version >= 8)`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[t._v("average number of entry processes (concurrent connections)`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[t._v("average number of processes`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[t._v("average physical memory usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[t._v("average virtual memory usage`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu_faults")])])]),t._v(" "),a("td",[t._v("total number of CPU usage faults`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io_faults")])])]),t._v(" "),a("td",[t._v("total number of max IO faults`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops_fault")])])]),t._v(" "),a("td",[t._v("total number of max IO operations faults; (LVE version >= 8)`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep_faults")])])]),t._v(" "),a("td",[t._v("total number of max entry processes faults`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc_faults")])])]),t._v(" "),a("td",[t._v("total number of max processes faults`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem_faults")])])]),t._v(" "),a("td",[t._v("total number of out of physical memory faults`")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem_faults")])])]),t._v(" "),a("td",[t._v("total number of out of virtual memory faults`")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-r FOR_RESELLER")]),t._v(", "),a("code",[t._v("--for-reseller FOR_RESELLER")])]),t._v(" – show statistics only for given reseller and his users")])])]),t._v(" "),a("p",[t._v("Filter items by resource usage.")]),t._v(" "),a("ul",[a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-usage BY_USAGE")])]),t._v(" – show LVEs with usage (averaged) within 90 percent of the limit available values")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("FIELD")]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[t._v("average CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql_cpu")])])]),t._v(" "),a("td",[t._v("average MySQL CPU usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[t._v("average IO usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql_io")])])]),t._v(" "),a("td",[t._v("average MySQL IO usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[t._v("average IO operations; (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[t._v("average number of entry processes (concurrent connections)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[t._v("average number of processes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[t._v("average physical memory usage")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[t._v("average virtual memory usage")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-percentage 0..100")])]),t._v(" – define percentage for "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-usage")])]),t._v(" option; default "),a("code",[t._v("90")])])])]),t._v(" "),a("p",[t._v("Filter items by the number of faults.")]),t._v(" "),a("ul",[a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-fault BY_FAULT")])]),t._v(" – show only accounts that have some faults for the given limit")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("FIELD")]),t._v(" "),a("td",[t._v("DESCRIPTION")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("any")])])]),t._v(" "),a("td",[t._v("faults of all types")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")])])]),t._v(" "),a("td",[t._v("CPU usage faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")])])]),t._v(" "),a("td",[t._v("max IO usage faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[t._v("max IO operations faults; (LVE version >= 8)")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[t._v("max entry processes faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[t._v("max processes faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])])]),t._v(" "),a("td",[t._v("out of physical memory faults")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[t._v("out of virtual memory faults")])])])])]),t._v(" "),a("li",[a("p",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--threshold THRESHOLD")])]),t._v(" – in combination with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--by-fault")])]),t._v(" shows only accounts with the number of faults more than given; default "),a("code",[t._v("1")])])])]),t._v(" "),a("p",[t._v("Filter items by a time interval.")]),t._v(" "),a("p",[t._v("Allows to get information for the given period of time; you can either set "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--from")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--to")])]),t._v(" options, or just get information for the recent time period using "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--period option")]),t._v(".")])]),t._v(" "),a("p",[t._v(":::tip Note\n"),a("span",{staticClass:"notranslate"},[a("code",[t._v("--from")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--to")])]),t._v(" values are ignored when "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--period")])]),t._v(" is set.\n:::")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-f FROM")]),t._v(", "),a("code",[t._v("--from FROM")])]),t._v(" – run report from date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("[YY]YY-MM-DD[ HH:MM]")])]),t._v(" format; if not present, last 10 minutes are assumed")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("-t TO")]),t._v(", "),a("code",[t._v("--to TO")])]),t._v(" – run report up to date and time in "),a("span",{staticClass:"notranslate"},[a("code",[t._v("[YY]YY-MM-DD[ HH:MM]")])]),t._v(" format; if not present, reports results up to now")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--period PERIOD")])]),t._v(" – time period; specify minutes with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("m")])]),t._v(", hours with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("h")])]),t._v(", days with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("d")])]),t._v(", and values: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")]),t._v(", "),a("code",[t._v("yesterday")])]),t._v("; "),a("code",[t._v("5m")]),t._v(" - last 5 minutes, "),a("code",[t._v("4h")]),t._v(" - last four hours, "),a("code",[t._v("2d")]),t._v(" - last 2 days, and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("today")])])])]),t._v(" "),a("p",[t._v("Get detailed statistics.")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--id ID")])]),t._v(" – get detailed statistics for database record with the given id")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("--time-unit TIME_UNIT")])]),t._v(" – group statistics using the given time; 1 minute by default. For example: "),a("span",{staticClass:"notranslate"},[a("code",[t._v("1h")])]),t._v(" or "),a("span",{staticClass:"notranslate"},[a("code",[t._v("1h30m")])]),t._v(" or "),a("span",{staticClass:"notranslate"},[a("code",[t._v("dynamic")])]),t._v("; available only in pair with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--id")])])])]),t._v(" "),a("h4",{attrs:{id:"output-format-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-format-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Output format")])]),t._v(" "),a("p",[t._v("There are two different JSON formats used for "),a("strong",[t._v("summary statistics")]),t._v(" and "),a("strong",[t._v("detailed statistics")]),t._v(".")]),t._v(" "),a("p",[a("strong",[t._v("Summary statistics")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# cloudlinux-statistics --json\n {\n "resellers": [\n   {\n     "usage": <lve_section>,\n     "faults": <lve_section>,\n     "name": "reseller",\n     "limits": <lve_section>,\n     "id": 1000020005\n   }\n ],\n "timestamp": 1522920637,\n "mySqlGov": "enabled",            # possible values: ”enabled”, “error”\n "result": "success",\n "users": [\n   {\n     "username": "username",\n     "domain": "example.com",\n     "reseller": "reseller",\n     "limits": <lve_section>,\n     "faults": <lve_section>,\n     "usage": <lve_section>,\n     "id": 20005\n   }\n ]\n }\n')])])])]),t._v(" "),a("p",[a("strong",[t._v("Detailed statistics")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# cloudlinux-statistics --json --id=20001\n {\n "timestamp": 1523011550,\n "mySqlGov": "enabled",           # possible values: ”enabled”, “error”\n "result": "success",\n "user": [\n   {\n     "usage": <lve_section>,\n     "faults": <lve_section>,\n     "from": 1523011144,\n     "limits": <lve_section>,\n     "to": 1523011143\n   },\n ...\n   {\n     "usage": <lve_section>,\n     "faults": <lve_section>,\n     "from": 1523011204,\n     "limits": <lve_section>,\n     "to": 1523011203\n   }\n ]\n }\n')])])])]),t._v(" "),a("p",[t._v("For both, "),a("strong",[t._v("summary statistics")]),t._v(" and "),a("strong",[t._v("detailed statistics")]),t._v(", "),a("span",{staticClass:"notranslate"},[a("code",[t._v("<lve_section>")])]),t._v(" is the same and looks like following"),a("sup",[t._v(" *")]),t._v(".")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n   "ep": {\n     "lve": 1        # number of entry processes\n   },\n   "vmem": {\n     "lve": 2428928  # virtual memory usage or limit (deprecated)\n   },\n   "iops": {\n     "lve": 0        # io operations per second\n   },\n   "io": {\n     "lve": 0.0,     # io usage or limit (lve only)\n     "mysql": 0.0**   # io usage or limit (mysql only)\n   },\n   "nproc": {\n     "lve": 1        # number of processes in lve\n   },\n   "cpu": {\n     "lve": 25.6,    # cpu usage (lve only)\n     "mysql": 0.0*   # cpu usage (mysql governor only)\n   },\n   "pmem": {\n     "lve": 360448   # physical memory usage or limit\n   }\n }\n')])])])]),t._v(" "),a("p",[t._v(":::tip Note")]),t._v(" "),a("ul",[a("li",[t._v("you can specify only required fields using "),a("span",{staticClass:"notranslate"},[a("code",[t._v("--show")])]),t._v(" option;")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[a("code",[t._v("mysql")])]),t._v(" fields are only available with "),a("span",{staticClass:"notranslate"},[a("router-link",{attrs:{to:"/mysql_governor/#installation"}},[t._v("MySQL Governor")])],1),t._v(" installed.\n:::")])]),t._v(" "),a("h4",{attrs:{id:"units-of-measurement-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#units-of-measurement-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Units of measurement")])]),t._v(" "),a("p",[t._v("For "),a("span",{staticClass:"notranslate"},[a("code",[t._v("limits")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("usage")])]),t._v(" sections we use the following units of measurement.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Value")]),t._v(" "),a("td",[t._v("Units of measurement")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("cpu")]),t._v(" (LVE and MySQL)")])]),t._v(" "),a("td",[t._v("percentage of one "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" core")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("io")]),t._v(" (LVE and MySQL) ")])]),t._v(" "),a("td",[t._v("bytes per second")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("iops")])])]),t._v(" "),a("td",[t._v("number of "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" operations per second")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("pmem")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("code",[t._v("vmem")])])]),t._v(" "),a("td",[t._v("bytes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("ep")])])]),t._v(" "),a("td",[t._v("number of entry processes")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("nproc")])])]),t._v(" "),a("td",[t._v("number of processes in LVE")])])])]),t._v(" "),a("h4",{attrs:{id:"errors-handling-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#errors-handling-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Errors handling")])]),t._v(" "),a("p",[t._v("The format of the error message is the same as in the other "),a("span",{staticClass:"notranslate"},[a("code",[t._v("cloudlinux- *")])]),t._v(" utilities. When everything is ok, the "),a("span",{staticClass:"notranslate"},[a("code",[t._v("result")])]),t._v(" value is "),a("span",{staticClass:"notranslate"},[a("code",[t._v("success")])]),t._v(". Otherwise, it contains error message.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# cloudlinux-statistics --json \n{\n  "context": {\n      "error_text": "Very bad error"\n  },\n  "result": "An error occured: \\"%(error_text)s\\"",\n  "timestamp": 1523871939.639394\n}\n')])])])]),t._v(" "),a("h4",{attrs:{id:"examples-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples-2","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Examples")])]),t._v(" "),a("ul",[a("li",[t._v("get top 10 users ordered by "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" usage for today")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-statistics --json --order-by=cpu --period=today --limit=10\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("get users that hit "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" limit more than 10 times for today")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-statistics --json --period=today --by-fault=io --threshold=10\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("get users that used more than 80% of "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" in last 24 hours")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-statistics --json --by-usage=cpu --percentage=80 --period=24h\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("get information only about reseller and his users")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-statistics --json --for-reseller=reseller_name\n")])])])]),t._v(" "),a("ul",[a("li",[t._v("get information only about "),a("span",{staticClass:"notranslate"},[t._v("CPU")]),t._v(" and "),a("span",{staticClass:"notranslate"},[t._v("IO")]),t._v(" usage")])]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# cloudlinux-statistics --json --show=cpu,io\n")])])])]),t._v(" "),a("h2",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugins")]),t._v(" "),a("p",[t._v("LVE "),a("span",{staticClass:"notranslate"},[t._v(" Stats 2 ")]),t._v(" comes with a set of generic plugins:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Plugin Name")]),t._v(" "),a("td",[t._v("Order")]),t._v(" "),a("td",[t._v("Default")]),t._v(" "),a("td",[t._v("Period (seconds)")]),t._v(" "),a("td",[t._v("Description")])]),t._v(" "),a("tr",[a("td",[t._v("LVECollector")]),t._v(" "),a("td",[t._v("1000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("Collects usage/limits data from "),a("code",[t._v("/proc/lve/list")])])]),t._v(" "),a("tr",[a("td",[t._v("CPUInfoCollector")]),t._v(" "),a("td",[t._v("2000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("collents info about "),a("span",{staticClass:"notranslate"},[t._v(" CPU - "),a("code",[t._v("/proc/cpuinfo")])])])]),t._v(" "),a("tr",[a("td",[t._v("LVEUsernamesCollector")]),t._v(" "),a("td",[t._v("3000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("3600")]),t._v(" "),a("td",[t._v("collects usernames & user ids to match "),a("span",{staticClass:"notranslate"},[a("code",[t._v("uid <-> lve id")])]),t._v(" later on")])]),t._v(" "),a("tr",[a("td",[t._v("LVEUsageAnalyzer")]),t._v(" "),a("td",[t._v("4000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("analyzes usage of LVE")])]),t._v(" "),a("tr",[a("td",[t._v("LveUsageAggregator")]),t._v(" "),a("td",[t._v("5000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("60")]),t._v(" "),a("td",[t._v("aggregates data by time periods")])]),t._v(" "),a("tr",[a("td",[t._v("DBGovSaver")]),t._v(" "),a("td",[t._v("6000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("Saves data about database governor")])]),t._v(" "),a("tr",[a("td",[t._v("FileSaver")]),t._v(" "),a("td",[t._v("7000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("Saves LVE data into "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/var/lve/info")])])])]),t._v(" "),a("tr",[a("td",[t._v("CloudLinuxTopFileSaver")]),t._v(" "),a("td",[t._v("8000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("60")]),t._v(" "),a("td",[t._v("saves data used by "),a("span",{staticClass:"notranslate"},[t._v(" cloudlinux-top to "),a("code",[t._v("/var/lve/cloudlinux-top.json")])])])]),t._v(" "),a("tr",[a("td",[t._v("DBSaver")]),t._v(" "),a("td",[t._v("9000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("60")]),t._v(" "),a("td",[t._v("save LVE data to database")])]),t._v(" "),a("tr",[a("td",[t._v("DbUsernamesSaver")]),t._v(" "),a("td",[t._v("10000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("3600")]),t._v(" "),a("td",[t._v("saves users name to database")])]),t._v(" "),a("tr",[a("td",[t._v("DBSaverX60")]),t._v(" "),a("td",[t._v("11000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("3600")]),t._v(" "),a("td",[t._v("saves aggregated hourly data into database")])]),t._v(" "),a("tr",[a("td",[t._v("SnapshotSaver")]),t._v(" "),a("td",[t._v("12000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("30")]),t._v(" "),a("td",[t._v("collects & saves snapshots data")])]),t._v(" "),a("tr",[a("td",[t._v("StatsNotifier")]),t._v(" "),a("td",[t._v("13000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("varied")]),t._v(" "),a("td",[t._v("notify user/admin based on usage")])]),t._v(" "),a("tr",[a("td",[t._v("HistoryCleaner")]),t._v(" "),a("td",[t._v("14000")]),t._v(" "),a("td",[t._v("Y")]),t._v(" "),a("td",[t._v("3600")]),t._v(" "),a("td",[t._v("removes old usage")])]),t._v(" "),a("tr",[a("td",[t._v("ResMEMCollector")]),t._v(" "),a("td",[t._v("1500")]),t._v(" "),a("td",[t._v("N")]),t._v(" "),a("td",[t._v("30")]),t._v(" "),a("td",[t._v("collects physical memory usage from processes RES field instead of "),a("span",{staticClass:"notranslate"},[a("code",[t._v("/proc/lve/list")])])])]),t._v(" "),a("tr",[a("td",[t._v("LVEDestroyer")]),t._v(" "),a("td",[t._v("-")]),t._v(" "),a("td",[t._v("N")]),t._v(" "),a("td",[t._v("5")]),t._v(" "),a("td",[t._v("destroys LVEs that weren't active for X iterations. Number of iterations is passed from config using iterations variable. "),a("span",{staticClass:"notranslate"},[a("code",[t._v("iterations=0")])]),t._v(" means plugin disabled")])])])]),t._v(" "),a("p",[t._v("To enable non-default plugin, copy or link it to "),a("em",[t._v("/usr/share/lve-stats/plugins")]),t._v(" directory.")]),t._v(" "),a("p",[t._v("For example to enable "),a("em",[t._v("ResMEMCollector")]),t._v(" plugin, do:")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ln -s /usr/share/lve-stats/plugins.other/res_mem_collector.py /usr/share/lve-stats/plugins/\nservice lvestats restart\n")])])])]),t._v(" "),a("h2",{attrs:{id:"creating-a-plugin-for-lve-stats-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-plugin-for-lve-stats-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Creating a Plugin for LVE Stats 2")]),t._v(" "),a("ul",[a("li",[a("p",[a("router-link",{attrs:{to:"/lve-stats_2/#introduction"}},[t._v("Introduction")])],1)]),t._v(" "),a("li",[a("p",[a("router-link",{attrs:{to:"/lve-stats_2/#server-plugin-arrangement"}},[t._v("Server Plugin Arrangement")])],1)]),t._v(" "),a("li",[a("p",[a("router-link",{attrs:{to:"/lve-stats_2/#plugin-configuration"}},[t._v("Plugin Configuration")])],1)]),t._v(" "),a("li",[a("p",[a("router-link",{attrs:{to:"/lve-stats_2/#types-of-plugins"}},[t._v("Types of Plugins")])],1)])]),t._v(" "),a("h3",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction","aria-hidden":"true"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" LVE Stats 2 ")]),t._v(" complex has scalable architecture, which allows to connect custom plugins.")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" LVE Stats ")]),t._v(" server searches for plugins in the directory which is specified with plugins parameter of server’s "),a("em",[t._v("/etc/sysconfig/lvestats2")]),t._v(" configuration file. Default directory is "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/usr/share/lve-stats/plugins")]),t._v(". ")])]),t._v(" "),a("p",[t._v("Each plugin must be of a "),a("span",{staticClass:"notranslate"},[t._v(" Python ")]),t._v(" class, must be written in "),a("span",{staticClass:"notranslate"},[t._v(" Python ")]),t._v(" language and its file must have "),a("span",{staticClass:"notranslate"},[t._v(" .py ")]),t._v(" extension. Files with all other extensions will be ignored. For normal server work access permission 400 is enough; owner – "),a("span",{staticClass:"notranslate"},[t._v(" root ")]),t._v(" .")]),t._v(" "),a("p",[t._v("Plugin classes can be of the same name, but better not, because classes' names can affect the set of parameters in "),a("span",{staticClass:"notranslate"},[a("em",[t._v("set_config")])]),t._v(" method. You can find detailed plugins' configuring information below, in appropriate chapter.")]),t._v(" "),a("p",[t._v("Plugin class must contain "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method, which is invoked by the server every 5 seconds (by default, can be changed by interval parameter of configuration file).\nAlso "),a("span",{staticClass:"notranslate"},[t._v(" set_config ")]),t._v(" method (configuration settings) can be available. You can find more info in "),a("span",{staticClass:"notranslate"},[a("router-link",{attrs:{to:"/lve-stats_2/#plugin-configuration"}},[t._v("Plugins Configuration")])],1),t._v(" chapter.")]),t._v(" "),a("p",[t._v("Additionally the following attributes can be set (plugin class instance variable):")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[t._v(" order (integer) ")]),t._v(" - defines plugin's position in the server's plugin list, (more info in "),a("span",{staticClass:"notranslate"},[t._v(" Servers Plugin Arrangement ")]),t._v(" ).")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v(" timeout (integer ")]),t._v(" or "),a("span",{staticClass:"notranslate"},[t._v(" float ")]),t._v(" ) – the longest allowable duration of one launch of the plugin (execute method). Default value of "),a("span",{staticClass:"notranslate"},[t._v(" timeout ")]),t._v(" parameter is 5 seconds.")]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v(" period (integer) ")]),t._v(" – sets the interval between two launches of execute plugin method in seconds. If not defined, then plugin runs every 5 seconds ( "),a("span",{staticClass:"notranslate"},[t._v(" interval ")]),t._v(" parameter in configuration file).")])]),t._v(" "),a("p",[t._v("When "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method of the plugin is invoked, the server creates an attribute "),a("span",{staticClass:"notranslate"},[a("em",[t._v("now")])]),t._v(" in it, where launch time is recorded. This value is equal to what a standard Python function "),a("span",{staticClass:"notranslate"},[a("em",[t._v("time.time()")])]),t._v(" returns. All the plugins launched one after another receive the same  value of "),a("span",{staticClass:"notranslate"},[a("em",[t._v("now")])]),t._v(" attribute from the server. "),a("span",{staticClass:"notranslate"},[a("em",[t._v("now")])]),t._v(" is overwritten before "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method is invoked.")]),t._v(" "),a("p",[t._v("The previous value of now attribute is not saved by the server. If plugin needs it, it has to save it by itself.")]),t._v(" "),a("p",[t._v("Plugin class can be inherited from "),a("span",{staticClass:"notranslate"},[a("em",[t._v("LveStatsPlugin")])]),t._v(" class, which is the part of the server itself. This is not obligatory, but inheritance can help to avoid different errors in servers work, particularly if a plugin doesn't contain required execute method.")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("em",[t._v("LveStatsPlugin")])]),t._v(" class is defined in the file: "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/opt/alt/python27/lib/python2.7/site-packages/lvestats/core/plugin.py")]),t._v(" . ")])]),t._v(" "),a("h3",{attrs:{id:"server-plugin-arrangement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-plugin-arrangement","aria-hidden":"true"}},[t._v("#")]),t._v(" Server Plugin Arrangement")]),t._v(" "),a("p",[t._v("When the server starts, it performs the search of plugins in the directory specified in "),a("em",[t._v("/etc/sysconfig/lvestats2")]),t._v(" configuration file. This directory is scanned only when the server starts, therefore if any plugin was added into the directory, the server has to be restarted with the following command:\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("service lvestats restart.\n")])])])]),t._v(" "),a("p",[t._v("After successful restart, the plugins are graded and executed  ascending by "),a("span",{staticClass:"notranslate"},[a("em",[t._v("order")])]),t._v(" attribute. If any plugin "),a("span",{staticClass:"notranslate"},[a("em",[t._v("order")])]),t._v(" attribute is not set, it is considered as a "),a("span",{staticClass:"notranslate"},[t._v(" Python ")]),t._v(" language constant "),a("em",[t._v("sys.maxint")]),t._v(" (which is usually 9223372036854775807). This in fact means that such plugins will be executed in the last.\nIf any plugins has similar "),a("span",{staticClass:"notranslate"},[a("em",[t._v("order")])]),t._v(" meanings, their execution order is unpredictable.")]),t._v(" "),a("p",[t._v("The server invokes "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute")])]),t._v(" method of all plugins one after another.")]),t._v(" "),a("p",[t._v("When the server invokes "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method of any plugin, it transmits a data dictionary ( "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lve_data")])]),t._v(" argument) into plugin. The dictionary is common for all the plugins. Any plugin can read, write and change any data in this dictionary. "),a("span",{staticClass:"notranslate"},[t._v(" LVE Stats 2 ")]),t._v(" server doesn't control this area. That is why one must be careful while developing new plugins, in order not to change or corrupt other plugins' data which can break their functionality.")]),t._v(" "),a("p",[t._v("If an exception occurs in "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method, its text and "),a("span",{staticClass:"notranslate"},[t._v(" python ")]),t._v(" stack trace is recorded into server log "),a("em",[t._v("/var/log/lve-stats")]),t._v(" and all the changes made to "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lve_data")])]),t._v(" dictionary before the exception happened are lost.")]),t._v(" "),a("p",[t._v("The keys of the "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lve_data")])]),t._v(" dictionary are recommended to look like "),a("span",{staticClass:"notranslate"},[t._v(" “ "),a("em",[t._v("PluginName_Key")]),t._v(" ” ")]),t._v(" , in order the plugins do not corrupt other data accidentally.")]),t._v(" "),a("p",[t._v("Server contains some standard plugins which define and use the following keys in the common dictionary "),a("span",{staticClass:"notranslate"},[t._v(" lve_data: "),a("em",[t._v("LVE_VERSION, stats, old_stats, procs")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lve_usage")])]),t._v(" . User plugins can use data from these keys, but it is recommended not to change them if there is no special need, because it can break the next plugins in the execution queue.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Key")]),t._v(" "),a("td",[t._v("Content")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("LVE_VERSION")])])]),t._v(" "),a("td",[t._v("LVE version. The same as console command "),a("span",{staticClass:"notranslate"},[a("code",[t._v("lvectl lve-version")])]),t._v(" produces.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("stats")])])]),t._v(" "),a("td",[t._v("Dictionary, that contains lve id’s as keys and LVEStat class objects as values. Every LVEStat object contains values of usages and limits taken from "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/proc/lve/list")])]),t._v(" file for every "),a("span",{staticClass:"notranslate"},[t._v(" LVE Id ")]),t._v(" . Dictionary keys – "),a("span",{staticClass:"notranslate"},[t._v(" integer lve id ")]),t._v(" , including 0 for “ "),a("span",{staticClass:"notranslate"},[t._v(" default ")]),t._v(" ” LVE. This dictionary is updated on each iteration of lvestats-server (every 5 seconds by default). LVEStat – is a standard server class, it can be imported with the command from "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lvestats.core.lvestat")])]),t._v(" "),a("code",[t._v("import LVEStat.")]),t._v(" The class is described in the file "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/opt/alt/python27/lib/python2.7/site-packages/lvestats/core/lvestat.py")])]),t._v(" . Here you can find the whole list of data fields and their functions.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("old_stats")])])]),t._v(" "),a("td",[a("em",[t._v("stats")]),t._v(" content from the previous iteration. Before the first iteration – empty dictionary.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("totalHz")])])]),t._v(" "),a("td",[t._v("When LVE_VERSION is 4, real "),a("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" frequency in "),a("span",{staticClass:"notranslate"},[t._v(" Hz ")]),t._v(" multiplied by number of cores. When LVE_VERSION > 4, "),a("span",{staticClass:"notranslate"},[t._v(" CPU ")]),t._v(" speed is in conventional units and equals to 1000000000 * cores (1 "),a("span",{staticClass:"notranslate"},[t._v(" GHz ")]),t._v(" per core).")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("procs")])])]),t._v(" "),a("td",[t._v("Quantity of "),a("span",{staticClass:"notranslate"},[t._v("  CPU ")]),t._v(" cores.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lve_usages")])])]),t._v(" "),a("td",[t._v("Contains accumulated LVE statistics for each 5-seconds interval in current minute. Cleared each minute.")])]),t._v(" "),a("tr",[a("td",[a("span",{staticClass:"notranslate"},[a("code",[t._v("lve_usage")])])]),t._v(" "),a("td",[t._v("Contains aggregated LVE Statistics for “previous” minute to store to database. Overwritten each minute.")])])])]),t._v(" "),a("p",[t._v("Each plugin’s instance lifetime is from the moment it was loaded till the server stops working. But if "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute()")])]),t._v(" method working time exceeds timeout, the plugin will be terminated and restarted in the next iteration. All changes to the "),a("span",{staticClass:"notranslate"},[a("em",[t._v("lve_data")])]),t._v(" dictionary will be lost.")]),t._v(" "),a("p",[t._v("During servers graceful shutdown (restart, server shutdown, commands "),a("span",{staticClass:"notranslate"},[a("code",[t._v("service lvestats stop, service lvestats restart")])]),t._v(" ), each plugin receives SIGTERM signal.\nThis is useful to correctly unload the plugin (terminate all subsidiary processes, save data to files etc.). If a plugin doesn't need to “finalize” its execution before termination, then there's no need to implement this signal handler. Below you can see an example of such handler.")]),t._v(" "),a("p",[t._v("::: tip Note\nIf a plugin implements handler for SIGTERM, then this handler must end with "),a("span",{staticClass:"notranslate"},[a("code",[t._v("sys.exit(0)")])]),t._v(" command. Otherwise plugin process will not be terminated correctly and will become orphaned.\n:::")]),t._v(" "),a("h3",{attrs:{id:"plugin-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Plugin Configuration")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" LVE Stats 2 ")]),t._v(" Server allows to configure each plugin separately.")]),t._v(" "),a("p",[t._v("On initialization stage the server invokes "),a("span",{staticClass:"notranslate"},[a("em",[t._v("set_config()")])]),t._v(" method of the plugin and locates there a dictionary which contains:")]),t._v(" "),a("ul",[a("li",[t._v("all parameters from file "),a("em",[t._v("/etc/sysconfig/lvestats2")]),t._v(" (global).")]),t._v(" "),a("li",[t._v("plugin's individual configuration file parameters (if one exists). Configuration files must be located in "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/etc/sysconfig/lvestats.config")])]),t._v(" directory, have .cfg extension and be the same format as "),a("em",[t._v("/etc/sysconfig/lvestats2")]),t._v(" . Files in this directory are matched with the plugins by name. For instance, if plugin class is "),a("span",{staticClass:"notranslate"},[a("em",[t._v("Plugin1_class")])]),t._v(" , then server will try to find and download "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/etc/sysconfig/lvestats.config/Plugin1_class.cfg")]),t._v(". ")]),t._v(" Names are case sensitive. If any plugin doesn't have an individual configuration file, then it's not an error. In this case plugin will just receive parameters from "),a("em",[t._v("/etc/sysconfig/lvestats2")]),t._v(" .")])]),t._v(" "),a("p",[t._v("::: tip Note\nAn individual configuration file of every plugin is loaded after server configuration file. That is why if it contains any parameters with names similar to ones of server config, then plugin will use parameters from its individual config rather than server config parameters.")]),t._v(" "),a("p",[t._v("If a plugin doesn't require any configuration to be done, then set_config method can be skipped.")]),t._v(" "),a("p",[t._v("In addition, plugins can use their own configuration methods.\n:::")]),t._v(" "),a("h3",{attrs:{id:"types-of-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#types-of-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Types of Plugins")]),t._v(" "),a("p",[t._v("According to server architecture, plugins can be of the following types:")]),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"notranslate"},[t._v(" collectors ")])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v(" analyzers ")])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v(" persistors ")])]),t._v(" "),a("li",[a("span",{staticClass:"notranslate"},[t._v(" notifiers ")])])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Collectors ")]),t._v(" are designed to collect information; "),a("span",{staticClass:"notranslate"},[t._v(" analyzers ")]),t._v(" – to analyze it and form some other data on its basis; "),a("span",{staticClass:"notranslate"},[t._v(" persistors ")]),t._v(" – to save information from the common dictionary into files, databases, etc.; "),a("span",{staticClass:"notranslate"},[t._v(" notifiers ")]),t._v(" - to notify system users about any events.")]),t._v(" "),a("p",[t._v("This division is rather arbitrary. There is an opportunity to execute all the actions on collection, analysis and saving the information in one and only plugin. But at the same time the division into functionally independent parts allows to build flexible and easily configurable system for collecting and processing the data.")]),t._v(" "),a("p",[t._v("Also it is possible to implement the systems of lazy-write, planning of collecting/processing tasks and notifying users about different events.")]),t._v(" "),a("h3",{attrs:{id:"examples-of-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples-of-plugins","aria-hidden":"true"}},[t._v("#")]),t._v(" Examples of Plugins")]),t._v(" "),a("p",[t._v("Here is a practical example of a user plugin.")]),t._v(" "),a("p",[t._v("Specification:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("To trace specified file size changes. The name of file being traced must be specified in configuration file, which allows to change it without modifying the plugin itself. If file size has been changed, it has to be written as a message into our log. The name of log must be specified in configuration file as well.")])]),t._v(" "),a("li",[a("p",[t._v("File size must be checked with default interval (5 seconds), and log notification must be held once a minute (to avoid resource expend for possibly regular write).")])]),t._v(" "),a("li",[a("p",[t._v("System administrator must receive emails with file size at the moment the email was sent. These notifications must be sent even if the file size hasn’t been changed. Notification emails must be read periodicity from configuration file as well as sender/receiver emails .")])])]),t._v(" "),a("p",[t._v("As file size check, fixing the result and notification sending must be held with different periods, then it’s impossible to realize all the tasks by means of one plugin.\nThe fact that one minute (60 seconds) is multiple to 5 seconds doesn’t matter in this case, because default period can be changed in server’s configuration file, but the condition of fixing the result once a minute is a part of the specification, which can not be violated. In addition, notification email period is known in advance, as it is specified by user in configuration file.")]),t._v(" "),a("p",[t._v("That is why we realize 4 plugins: "),a("span",{staticClass:"notranslate"},[a("strong",[t._v("collector, analyzer, persistor")])]),t._v(" and "),a("span",{staticClass:"notranslate"},[a("strong",[t._v("notifier")])]),t._v(" .")]),t._v(" "),a("h4",{attrs:{id:"collector"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#collector","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Collector")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Collector's ")]),t._v(" aim is to determine the size of a proper file.\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# FSize_watcher_collector.py\n# Example plugin for monitoring file size.\n# Part 1. Collector\n\nimport os\nfrom lvestats.core.plugin import LveStatsPlugin \n\n# Key name\nCOLLECTOR_KEY = 'FSizeWatcher_fsize'\nCOLLECTOR_KEY_FILENAME = 'FSizeWatcher_fname'  \n\nclass FSize_watcher_collector (LveStatsPlugin):\n\t# this plugin should be first in chain\n\torder = 0\n\t# File to monitoring\n\tfile_to_monitoring = None \n\t\n\tdef __init__(self):\n\t\tpass \n\t\t\n\t# Sets configuration to plugin\n\tdef set_config(self, config):\n\t\tself.file_to_monitoring = config.get('file_to_monitoring', None)\n\t\tpass\n\t# Work method\n\tdef execute(self, lve_data):\n\t\ttry:\n\t\t\t# if monitoring file absent, do nothing\n\t\t\tif self.file_to_monitoring is None or not os.path.exists(self.file_to_monitoring):\n\t\treturn \n\t\t\n\t\t\t# Get file size\n\t\t\tstat_info = os.stat(self.file_to_monitoring)\n\t\t\tfsize = stat_info.st_size \n\t\t\t\n\t\t\t# Place file name and file size to server data dictionary\n\t\t\tlve_data[COLLECTOR_KEY_FILENAME] = self.file_to_monitoring\n\t\t\tlve_data[COLLECTOR_KEY] = fsize\n\t\texcept (OSError, IOError):\n\t\t\t# file absent or any other error - remove size from dictionary\n\t\t\tdel lve_data[COLLECTOR_KEY]\n")])])])]),t._v(" "),a("p",[t._v("Plugin algorithm is extremely simple – file size is read and written into data dictionary. Files name is read from "),a("span",{staticClass:"notranslate"},[a("em",[t._v("set_config")])]),t._v(" method configuration. If the name is not specified, then "),a("span",{staticClass:"notranslate"},[t._v(" None ")]),t._v(" is written into appropriate variable. All the errors are completely ignored (e.g. if specified file doesn't exist or there's no way to read any of it's information).")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("em",[t._v("order")])]),t._v(" attribute is specified as 0 to make this plugin go the first among three. Data collector must always be the first in plugins logical chain, because it provides all the necessary information for the analyzer which goes the next. Specific values of "),a("span",{staticClass:"notranslate"},[a("em",[t._v("order")])]),t._v(" can be of any kind, but what is important is that when the server starts, all the plugins line up in proper sequence: "),a("span",{staticClass:"notranslate"},[t._v(" collector – analyzer – persistor ")]),t._v(" .")]),t._v(" "),a("p",[t._v("In order to make plugin work, we have to create configuration file "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/etc/sysconfig/lvestats.config/FSize_watcher_collector.cfg")])]),t._v(" with the following content:\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Config file for FSize_watcher_collector plugin\n# Please define monitoring file here\n# file_to_monitoring = /usr/local/cpanel/logs/error_log\nfile_to_monitoring = /usr/local/cpanel/logs/access_log\n")])])])]),t._v(" "),a("p",[t._v("Note that file name "),a("span",{staticClass:"notranslate"},[a("em",[t._v("FSize_watcher_collector")])]),t._v(" without .cfg extension matches plugin class name.")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[a("em",[t._v("file_to_monitoring")])]),t._v(" option is read by plugin in "),a("span",{staticClass:"notranslate"},[a("em",[t._v("set_config")])]),t._v(" method and contains file’s full name for monitoring.")]),t._v(" "),a("p",[t._v("Files for monitoring, suggested in the actual example - "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/usr/local/cpanel/logs/error_log")]),t._v(" and "),a("em",[t._v("/usr/local/cpanel/logs/access_log")])]),t._v(" - are real, these are cPanel control panel logs.")]),t._v(" "),a("p",[t._v("The first file is errors log; the second is appeal log, is refreshed during common work with panel (e.g. if user email address is changed).")]),t._v(" "),a("p",[t._v("Errors log tracking is more important, but appeal log monitoring allows to illustrate plugins work more in details, because it is refreshed more often.")]),t._v(" "),a("p",[t._v("Note that plugin can monitor one file only.")]),t._v(" "),a("h4",{attrs:{id:"analyzer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#analyzer","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Analyzer")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Analyzer ")]),t._v(" decides if the file's size has changed and gives a command to persistor to refresh log.")]),t._v(" "),a("div",{staticClass:"notranslate"},[a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# FSize_watcher_analyzer.py\n# Example plugin for monitoring file size.\n# Part 2. Analyzer \n\nfrom lvestats.core.plugin import LveStatsPlugin \n\n# Key name from collector plugin\nCOLLECTOR_KEY = 'FSizeWatcher_fsize' \n\n# Key name 1 for saver plugin\nSAVER_KEY = 'FSizeWatcher_fsize_to_store'\n# Key name 2 for saver plugin\nSAVER_DATA_PRESENCE = 'FSizeWatcher_fsize_present'  \n\nclass FSize_watcher_analyzer (LveStatsPlugin):\n\t# this plugin should be second in chain\n\torder = 1\n\t# Last file size\n\tfile_last_size = 0\n\t# Plugin run period in secondsperiod = 60 \n\t\n\tdef __init__(self):\n\t\tpass \n\t\t\n\t# work method\n\tdef execute(self, lve_data):\n\t\t# Default setting for saver\n\t\tlve_data[SAVER_DATA_PRESENCE] = 0\n\t\t# Check presence data\n\t\tif COLLECTOR_KEY not in lve_data:\n\t\treturn \n\t\t\n\t\t# Get file size from server data dictionary\n\t\tfsize = lve_data[COLLECTOR_KEY] \n\t\t\n\t\t# Check, if file size changed, store it for saver plugin\n\t\tif fsize == self.file_last_size:\n\t\t\treturn \n\t\t\t\n\t\t# Put new size for saver plugin\n\t\tlve_data[SAVER_KEY] = fsize\n\t\tself.file_last_size = fsize\n\t\tlve_data[SAVER_DATA_PRESENCE] = 1\n")])])])]),t._v(" "),a("p",[t._v("This plugin is extremely simple as well. It starts after "),a("span",{staticClass:"notranslate"},[t._v(" collector (order=1) ")]),t._v(" , searches for file size in the dictionary and compares it with the previous index. If it has changed, then it writes a sign of presence of a new size into the dictionary. If no changes seen, then sign resets. The previous file size is stored in the plugin itself in "),a("span",{staticClass:"notranslate"},[a("em",[t._v("file_last_size")])]),t._v(" variable. Note that they are stored during the whole server "),a("span",{staticClass:"notranslate"},[t._v(" lve-stats ")]),t._v(" lifetime.")]),t._v(" "),a("p",[t._v("If file size is not found in data dictionary, then plugin just ends.")]),t._v(" "),a("p",[t._v("All the errors are completely ignored.")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Analyzer ")]),t._v(" is unconfigurable, that is why it doesn’t require any configuration file and it doesn’t contain "),a("span",{staticClass:"notranslate"},[a("em",[t._v("set_config")])]),t._v(" method.")]),t._v(" "),a("p",[t._v("Plugin starts every 60 seconds (1 minute), because we need data fixation to be performed one time in a minute.")]),t._v(" "),a("h4",{attrs:{id:"persistor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#persistor","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Persistor")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Persistor ")]),t._v(" saves information from the common dictionary into files, databases, etc.\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# FSize_watcher_saver.py\n# Example plugin for monitoring file size and last modification date-time.\n# Part 3. Data saver \n\nimport signal\nimport sys\nimport time\nfrom lvestats.core.plugin import LveStatsPlugin \n\n# Key name 1 for saver plugin\nSAVER_KEY = 'FSizeWatcher_fsize_to_store'\n# Key name 2 for saver plugin\nSAVER_DATA_PRESENCE = 'FSizeWatcher_fsize_present'\n# Monitoring file name\nCOLLECTOR_KEY_FILENAME = 'FSizeWatcher_fname'  \n\nclass FSize_watcher_saver (LveStatsPlugin):\n\t# this plugin should be third in chain\n\torder = 2\n\t# Plugin run period in seconds\n\tperiod = 60\n\t# Log filename\n\tlog_file_name = None\n\t# First run flag\n\tis_first_run = True \n\t\n\tdef __init__(self):\n\t\tsignal.signal(signal.SIGTERM, self.sigterm_handler) \n\t\t\n\t# Sets configuration to plugin\n\tdef set_config(self, config):\n\t\t# Get log filename\n\t\tself.log_file_name = config.get('log_filename', None) \n\t\t\n\t# work method\n\tdef execute(self, lve_data):\n\t\t# do nothing, if log file not defined\n\t\tif not self.log_file_name:\n\t\t\treturn\n\t\ttry:\n\t\t\t# Check presence data\n\t\t\tif SAVER_DATA_PRESENCE not in lve_data or lve_data[SAVER_DATA_PRESENCE] == 0:\n\t\t\t\t# No data\n\t\t\t\treturn\n\t\t\t# Get file size from server data dictionary\n\t\t\tfsize = lve_data[SAVER_KEY]\n\t\t\t\n\t\t\t# Store data to log\n\t\t\tf = open(self.log_file_name, 'a')\n\t\t\tif self.is_first_run:\n\t\t\t\tf.write('%s - FSize_watcher started. Monitoring file: %s, saving data period=%d sec\\n' % (time.asctime(time.localtime()), lve_data[COLLECTOR_KEY_FILENAME], self.period))\n\t\t\t\tself.is_first_run = False\n\t\t\tf.write('%s - FSize_watcher: file size is %d bytes\\n' % (time.asctime(time.localtime()), fsize))\n\t\t\tf.close()\n\t\texcept:\n\t\t\t# Ignore all errors\n\t\t\tpass \n\t\t\t\n\t# Terminate handler\n\tdef sigterm_handler(self, signum, frame):\n\t\tif self.log_file_name:\n\t\t\ttry:\n\t\t\t\t# Store data to log file\n\t\t\t\tf = open(self.log_file_name, 'a')\n\t\t\t\tf.write('%s - File watcher saver plugin: TERMINATE\\n' % time.asctime(time.localtime()))\n\t\t\t\tf.close()\n\t\t\t\tpass\n\t\t\texcept:\n\t\t\t\t# Ignore all errors\n\t\t\t\tpass\n\t\t# Terminate process\n\t\tsys.exit(0)\n")])])])]),t._v(" "),a("p",[t._v("Configuration file "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/etc/sysconfig/lvestats.config/FSize_watcher_saver.cfg")])]),t._v(" :\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Config file for FSize_watcher_saver.py plugin\n# Please define log filename here\nlog_filename = /var/log/FSize_watcher.log\n")])])])]),t._v(" "),a("p",[t._v("This plugin starts after "),a("span",{staticClass:"notranslate"},[t._v(" analyzer (order=2) ")]),t._v(" , checks new file size "),a("span",{staticClass:"notranslate"},[a("code",[t._v("presence")])]),t._v(" flag, and if positive – writes it into log. If the flag is cleared (which means the size hasn't changed), then plugin simply ends.")]),t._v(" "),a("p",[t._v("Starts once in a minute (period=60).")]),t._v(" "),a("p",[t._v("Also this plugin shows the work of signal handler.")]),t._v(" "),a("p",[t._v("Plugin constructor registers handler-function of a  proper signal: "),a("span",{staticClass:"notranslate"},[a("em",[t._v("signal.signal(signal.SIGTERM, self.sigterm_handler)")]),t._v(" .  ")]),t._v(" This means, that when the server finishes its work, then "),a("span",{staticClass:"notranslate"},[a("em",[t._v("sigterm_handler")])]),t._v(" method of plugin class will be invoked. In the actual example the function just writes a notification into log, tracing the fact of it's invocation.")]),t._v(" "),a("p",[t._v("Pay attention on "),a("span",{staticClass:"notranslate"},[a("em",[t._v("sys.exit(0)")])]),t._v(" command in the end of the handler. Find the information on it in "),a("span",{staticClass:"notranslate"},[a("router-link",{attrs:{to:"/lve-stats_2/#server-plugin-arrangement"}},[t._v("Server Plugin Arrangement")])],1),t._v(" section.")]),t._v(" "),a("p",[t._v("In addition see into examples of file log "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/var/log/FSize_watcher.log")])]),t._v(" formed by the plugins above:\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Tue Feb  3 13:06:24 2015 - FSize_watcher started. Monitoring file: /usr/local/cpanel/logs/access_log, saving data period=60 sec\nTue Feb  3 13:06:24 2015 - FSize_watcher: file size is 122972890 bytes\nTue Feb  3 13:07:25 2015 - FSize_watcher: file size is 122975507 bytes\nTue Feb  3 13:08:25 2015 - FSize_watcher: file size is 122978124 bytes\nTue Feb  3 13:09:25 2015 - FSize_watcher: file size is 122978997 bytes\nTue Feb  3 13:10:25 2015 - FSize_watcher: file size is 122981033 bytes\nTue Feb  3 13:11:25 2015 - FSize_watcher: file size is 122982052 bytes\nTue Feb  3 13:13:25 2015 - FSize_watcher: file size is 122983798 bytes\nTue Feb  3 13:20:15 2015 - File watcher saver plugin: TERMINATE\n")])])])]),t._v(" "),a("p",[t._v("and\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Thu Feb  5 13:07:27 2015 - FSize_watcher started. Monitoring file: /usr/local/cpanel/logs/error_log, saving data period=60 sec\nThu Feb  5 13:07:27 2015 - FSize_watcher: file size is 14771849 bytes\nThu Feb  5 14:03:32 2015 - FSize_watcher: file size is 14771995 bytes\nThu Feb  5 15:01:36 2015 - FSize_watcher: file size is 14772434 bytes\nThu Feb  5 17:15:47 2015 - FSize_watcher: file size is 14772873 bytes\nThu Feb  5 18:47:54 2015 - FSize_watcher: file size is 14775213 bytes\nThu Feb  5 19:11:56 2015 - FSize_watcher: file size is 14775652 bytes\nThu Feb  5 21:09:05 2015 - FSize_watcher: file size is 14776091 bytes\nThu Feb  5 23:06:14 2015 - FSize_watcher: file size is 14776530 bytes\nFri Feb  6 00:47:23 2015 - FSize_watcher: file size is 14778870 bytes\nFri Feb  6 01:02:24 2015 - FSize_watcher: file size is 14779309 bytes\nFri Feb  6 02:00:28 2015 - FSize_watcher: file size is 14779434 bytes\nFri Feb  6 03:16:34 2015 - FSize_watcher: file size is 14779873 bytes\nFri Feb  6 05:04:42 2015 - FSize_watcher: file size is 14779998 bytes\nFri Feb  6 05:12:43 2015 - FSize_watcher: file size is 14780437 bytes\nFri Feb  6 05:56:50 2015 - FSize_watcher: file size is 14780551 bytes\nFri Feb  6 06:01:50 2015 - FSize_watcher: file size is 14780975 bytes\nFri Feb  6 06:03:51 2015 - FSize_watcher: file size is 14782183 bytes\nFri Feb  6 06:04:51 2015 - FSize_watcher: file size is 14782575 bytes\nFri Feb  6 06:18:52 2015 - FSize_watcher: file size is 14782647 bytes\nFri Feb  6 06:21:52 2015 - FSize_watcher: file size is 14782898 bytes\nFri Feb  6 06:48:54 2015 - FSize_watcher: file size is 14785238 bytes\nFri Feb  6 07:09:56 2015 - FSize_watcher: file size is 14785677 bytes\nTue Feb  6 08:03:15 2015 - File watcher saver plugin: TERMINATE\n")])])])]),t._v(" "),a("p",[t._v("You can see that log record is being held once a minute (what we actually need), new file size is written.")]),t._v(" "),a("p",[t._v("Also we can notice that handler "),a("span",{staticClass:"notranslate"},[t._v(" SIG_TERM ")]),t._v(" was executed, signaling that plugin received the notification about server shut-down.")]),t._v(" "),a("h4",{attrs:{id:"notifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notifier","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("strong",[t._v("Notifier")])]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Notifier ")]),t._v(" informs system users about any events.\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# FSize_watcher_saver.py\n# Example plugin for monitoring file size and last modification date-time.\n# Part 4. Notifier \n\nimport time\nimport smtplib \n\nfrom lvestats.lib.commons import dateutil\nfrom lvestats.core.plugin import LveStatsPlugin  \n\n\n# Key name\nCOLLECTOR_KEY_FSIZE = 'FSizeWatcher_fsize'\nCOLLECTOR_KEY_FILENAME = 'FSizeWatcher_fname' \n\n# email message pattern\nEMAIL_MESSAGE_PATTERN = \"\"\"Hello, administrator!\nSize of the file '%s' is %d bytes.\n\"\"\"  \n\n\nclass FSize_watcher_notifier (LveStatsPlugin):\n\t# Default period\n\tDEFAULT_PERIOD_STR = '12h'\n\t# this plugin should be third in chainorder = 3\n\t# Timeout\n\ttimeout = 20\n\t# Notifier Log filename\n\tlog_file_name = '/var/log/FSize_watcher_notifier.log'\n\t# Email from address\n\temail_from = None\n\t# Email to address\n\temail_to = None\n\t# Email subject\n\temail_subject = None\n\t# Sets configuration to plugin\n\tdef set_config(self, config):\n\t\t# Email settings\n\t\tself.email_from = config.get('notify_from_email', None)\n\t\tself.email_to = config.get('notify_to_email', None)\n\t\tself.email_subject = config.get('notify_from_subject', 'Message from FSize_watcher_notifier plugin')\n\t\t# Notify period\n\t\ts_period = config.get('notify_period', None)\n\t\tif s_period:\n\t\t\tself.period = dateutil.parse_period2(s_period)\n\t\telse:\n\t\t\tself.period = dateutil.parse_period2(FSize_watcher_notifier.DEFAULT_PERIOD_STR)\n\t\tf = open(self.log_file_name, 'a')\n\t\tf.write('%s - FSize_watcher_notifier plugin: configure\\n' % time.asctime(time.localtime()))\n\t\tf.write('       - Period: %s\\n' % self.period)\n\t\tf.write('       - From: %s\\n' % self.email_from)\n\t\tf.write('       - To: %s\\n' % self.email_to)\n\t\tf.write('       - Subject: \\'%s\\'\\n' % self.email_subject)\n\t\tf.close() \n\t\t\n\t# work method\n\tdef execute(self, lve_data):\n\t\tif COLLECTOR_KEY_FSIZE not in lve_data or COLLECTOR_KEY_FILENAME not in lve_data:\n\t\t\treturn\n\t\tif not self.email_from or not self.email_to:\n\t\t\tf = open(self.log_file_name, 'a')\n\t\t\tf.write('%s - FSize_watcher_notifier plugin error: email_from or email_to not set\\n')\n\t\t\tf.close()\n\t\t\treturn\n\t\ttry:\n\t\t\tfrom email.mime.text import MIMEText\n\t\t\t# Send email\n\t\t\tmsg = MIMEText(EMAIL_MESSAGE_PATTERN % (lve_data[COLLECTOR_KEY_FILENAME], lve_data[COLLECTOR_KEY_FSIZE]))\n\t\tmsg['Subject'] = self.email_subject\n\t\tmsg['From'] = self.email_from\n\t\tmsg['To'] = self.email_to \n\t\t\n\t\ts = smtplib.SMTP('localhost')\n\t\ts.sendmail(self.email_from, [self.email_to], msg.as_string())\n\t\t\ts.quit() \n\t\t\t\n\t\tf = open(self.log_file_name, 'a')\n\t\t\tf.write('%s - FSize_watcher_notifier plugin: email message was successfully sent\\n' % time.asctime(time.localtime()))\n\t\t\tf.close()\n\t\t\texcept Exception as e:\n\t\t\tf = open(self.log_file_name, 'a')\n\t\t\tf.write('%s - FSize_watcher_notifier plugin error:\\n%s\\n' % (time.asctime(time.localtime()), str(e)))\n\t\t\tf.close()\n")])])])]),t._v(" "),a("p",[t._v("Configuration file "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/etc/sysconfig/lvestats.config/FSize_watcher_notifier.cfg")]),t._v(" : ")])]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Config file for FSize_watcher_notifier.py plugin\n# Please define email options here \n\nNOTIFY_FROM_EMAIL=user@hostname\nNOTIFY_FROM_SUBJECT=Message from FSize_watcher_notifier\nNOTIFY_TO_EMAIL=admin@hostname\nNOTIFY_PERIOD=12h\n")])])])]),t._v(" "),a("p",[t._v("Plugin’s index number equals 3 ( "),a("span",{staticClass:"notranslate"},[t._v(" order=3 ")]),t._v(" ), that is why "),a("span",{staticClass:"notranslate"},[t._v(" notifier ")]),t._v(" starts after the rest. But since it uses only data formed by "),a("span",{staticClass:"notranslate"},[t._v(" collector ")]),t._v(" , then its order may equal any number bigger that "),a("span",{staticClass:"notranslate"},[t._v(" collectors ")]),t._v(" order (>0).")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" Notifier ")]),t._v(" reads the necessary parameters from the configuration (email address, topic, period) and writes them into its own log as reference.")]),t._v(" "),a("p",[t._v("Plugin’s "),a("span",{staticClass:"notranslate"},[a("em",[t._v("execute")])]),t._v(" method checks the availability of all the necessary data (email parameters, collectors data) and sends the message. All the notifications are written into the "),a("span",{staticClass:"notranslate"},[t._v(" notifier's ")]),t._v(" own log.")]),t._v(" "),a("p",[t._v("If any data is missing,  the message is not sent.")]),t._v(" "),a("p",[t._v("Log example:\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Thu Feb  5 11:51:34 2015 - FSize_watcher_notifier plugin: configure\n       - Period: 60.0\n       - From: user@hostname\n       - To: admin@hostname\n       - Subject: 'Message from FSize_watcher_notifier'\nThu Feb  5 11:51:35 2015 - FSize_watcher_notifier plugin: email message was successfully sent\nThu Feb  5 11:52:35 2015 - FSize_watcher_notifier plugin: email message was successfully sent\nThu Feb  5 11:53:35 2015 - FSize_watcher_notifier plugin: email message was successfully sent\nThu Feb  5 11:54:35 2015 - FSize_watcher_notifier plugin: email message was successfully sent\nThu Feb  5 11:57:00 2015 - FSize_watcher_notifier plugin: configure\n       - Period: 43200.0\n       - From: user@hostname\n       - To: admin@hostname\n       - Subject: 'Message from FSize_watcher_notifier'\nThu Feb  5 11:57:00 2015 - FSize_watcher_notifier plugin: email message was successfully sent\n")])])])]),t._v(" "),a("h2",{attrs:{id:"file-info-and-format-for-var-lve-info-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-info-and-format-for-var-lve-info-file","aria-hidden":"true"}},[t._v("#")]),t._v(" File info and format for /var/lve/info file")]),t._v(" "),a("p",[t._v("This file is used by control panels to display to user their 'current' usage. The file is updated every 5 seconds by lve-stats.")]),t._v(" "),a("p",[t._v("When writing to this file we make sure that: average "),a("span",{staticClass:"notranslate"},[t._v(" CPU/IOPS/MEM ")]),t._v(" is never greater then "),a("span",{staticClass:"notranslate"},[t._v(" LIMIT ")]),t._v(" for that resource.")]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("p",[t._v("0,0,20,0,2500,0,262144,0,0,262144,0,0,100,0,0,0,0,1024,1024,0,0,0,0\n600,1,20,2492,2500,70,262144,0,0,262144,33,0,100,1,0,0,0,1024,1024,0,5,0,0\n200,0,20,0,2500,0,262144,0,0,262144,0,0,100,0,0,0,0,1024,1024,0,0,0,0\n500,0,20,0,2500,0,262144,0,0,262144,0,0,100,0,0,0,0,1024,1024,0,0,0,0")]),t._v(" "),a("p",[t._v("First line of the file is ' "),a("span",{staticClass:"notranslate"},[t._v(" default limits ")]),t._v(" '.")]),t._v(" "),a("p",[t._v("Fields:\n")]),a("div",{staticClass:"notranslate"},[a("p"),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 0 - id\n# 1 - mep (average entry processes)\n# 2 - lep  (limit ...)\n# 3 - cpu_usage (average speed)\n# 4 - lcpu (limit spped)\n# 5 - mem_usage (average virtual memory)\n# 6 - lmem (limit ...)\n# 7 - mem_fault (number of virtual memory faults)\n# 8 - mep_fault (number of entry processes faults)\nLVE_VERSION >=6\n# 9 - lmemphy (limit physical memory)\n# 10 - memphy (average ...)\n# 11 - memphy_fault (faults ...)\n# 12 - lnproc (limit number of processes)\n# 13 - nproc (average ...)\n# 14 - nproc_fault (faults ...)\n# 15 - lcpuw (CPU weight -- deprecated not used)\n# 16 - io_usage (average IO usage)\n# 17 - io_limit (limit ...)\nLVE_VERSION >=8\n#18 - liops  (limit IOPS)\n#19 - iops (average IOPS)\n")])])])]),t._v(" "),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[t._v("#")]),t._v(" Troubleshooting")]),t._v(" "),a("p",[a("span",{staticClass:"notranslate"},[t._v(" lvestats ")]),t._v(" service and utilities write fatal errors to system log.")]),t._v(" "),a("p",[t._v("There is "),a("span",{staticClass:"notranslate"},[a("em",[t._v("/var/log/lve-stats.log")])]),t._v(" file with additional information (warnings, tracebacks for errors)")])])},[],!1,null,null,null);s.default=n.exports}}]);